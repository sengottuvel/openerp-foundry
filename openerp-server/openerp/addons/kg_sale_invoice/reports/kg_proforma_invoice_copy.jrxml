<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="Proforma Invoice Copy" language="groovy" pageWidth="595" pageHeight="842" whenNoDataType="NoDataSection" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
	<property name="ireport.zoom" value="1.2396694214876032"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="131"/>
	<subDataset name="dataset1">
		<parameter name="invoice_id" class="java.lang.Integer"/>
		<queryString>
			<![CDATA[select invoice_id,invoice_no,invoice_date,customer_po_no,cust_po_date,off_name,hsn_name,qty,net_amount,total_net_amount,prime_cost,ref,max(ref) OVER (PARTITION by off_name) as max_ref,ref_pumpwise_tot,ref_tax_tot,hsn_tax_invoice_name from ( -- Added for testing
select invoice_id,
invoice_no,invoice_date,customer_po_no,cust_po_date,
off_name,hsn_name,qty,net_amount,total_net_amount,hsn_tax_invoice_name,
trim(TO_CHAR((coalesce(prime_cost,0.00)), '999G999G99G999G99G99G990D99')) as prime_cost
,row_number() OVER (PARTITION by off_name ORDER by off_name) as ref ,
trim(TO_CHAR((sum(coalesce(prime_cost,0.00)) OVER (PARTITION by off_name ORDER by off_name)), '999G999G99G999G99G99G990D99'))  as ref_pumpwise_tot,
trim(TO_CHAR((sum(coalesce(tax_tot,0.00)) OVER (PARTITION by off_name ORDER by off_name)), '999G999G99G999G99G99G990D99'))  as ref_tax_tot

from (

select invoice_id,
invoice_no,invoice_date,customer_po_no,cust_po_date,
off_name,hsn_name,qty,tax_tot,net_amount,tax_per,tax_per_val,total_net_amount,prime_cost,unit_price,hsn_tax_invoice_name,

case when cgst_tax is not null then
((qty*prime_cost)*tax_per_val)/100 else 0.00 end as cgst_tax_val,
case when sgst_tax is not null then
((qty*prime_cost)*tax_per_val)/100 else 0.00 end as sgst_tax_val,
case when igst_tax is not null then
((qty*prime_cost)*tax_per_val)/100 else 0.00 end as igst_tax_val,

case when cgst_tax is not null then
'9%' end as cgst_rate,
case when sgst_tax is not null then
'9%' end as sgst_rate,
case when igst_tax is not null then
'18%' end as igst_rate
from (

select invoice_id,
invoice_no,invoice_date,customer_po_no,cust_po_date,
off_name,hsn_name,qty,tax_tot,net_amount,tax_per,tax_per_val,total_net_amount,prime_cost,unit_price,hsn_tax_invoice_name,
max(cgst_tax) as cgst_tax,
max(sgst_tax) as sgst_tax,
max(igst_tax) as igst_tax
from (

select invoice_id,
invoice_no,invoice_date,customer_po_no,cust_po_date,
off_name,hsn_name,qty,tax_tot,net_amount,tax_per,tax_per_val,total_net_amount,prime_cost,unit_price,hsn_tax_invoice_name,

case when description ilike '%CGST%' then description end as cgst_tax,
case when description ilike '%SGST%' then description end as sgst_tax,
case when description ilike '%IGST%' then description end as igst_tax

from (

select
sale.id as invoice_id,
case when sale.invoice_no is not null then
sale.invoice_no else '' end as invoice_no,
case when sale.invoice_date is not null then
to_char(sale.invoice_date,'dd-mm-yyyy') else '' end as invoice_date,
case when sale.customer_po_no is not null then
sale.customer_po_no else '' end as customer_po_no,
case when sale.cust_po_date is not null then
to_char(sale.cust_po_date,'dd-mm-yyyy') else '' end as cust_po_date,

case when pump_type.name is not null then
pump_type.name else '' end as off_name,
hsn.name as hsn_name,
pump_line.qty as qty,
pump_line.tax_tot as tax_tot,
pump_line.net_amount as net_amount,
pump_line.unit_price as unit_price,
sale.net_amt as total_net_amount,
pump_line.prime_cost as prime_cost,
hsn_acc_tax.description as hsn_tax_invoice_name,

(pump_acc_tax.amount * 100) as tax_per,
pump_acc_tax.description as description,
(pump_acc_tax.amount * 100) as tax_per_val

from

kg_sale_invoice sale
left join ch_pumpspare_invoice pump_line on (pump_line.header_id = sale.id)
left join kg_pumpmodel_master pump_type on (pump_type.id = pump_line.pump_model_id)
left join kg_hsn_master hsn on (hsn.id = pump_line.hsn_no)
left join account_tax hsn_acc_tax on(hsn_acc_tax.id=hsn.igst_id)
left join res_partner partner on (partner.id = sale.customer_id)

left join pump_invoice_taxes pump_tax on(pump_tax.pump_invoice_id=pump_line.id)
left join account_tax pump_acc_tax on(pump_acc_tax.id=pump_tax.tax_id)
left join res_country_state state on(state.id=partner.state_id)
left join res_company comp on(comp.id=sale.company_id)
left join res_partner comppart on(comppart.id=comp.partner_id)
left join res_city compcity on(compcity.id=comppart.city_id)
left join res_country_state compstate on(compstate.id=comppart.state_id)

where sale.state not in ('draft','cancel') and pump_line.header_id=$P{invoice_id}

union

select
sale.id as invoice_id,

sale.invoice_no as invoice_no,
to_char(sale.invoice_date,'dd-mm-yyyy') as invoice_date,
sale.customer_po_no as customer_po_no,
to_char(sale.cust_po_date,'dd-mm-yyyy') as cust_po_date,
case when pump_type.name is not null then
pump_type.name else '' end as off_name,
hsn.name as hsn_name,
spare_line.qty as qty,
spare_line.tax_tot as tax_tot,
spare_line.net_amount as net_amount,
spare_line.unit_price as unit_price,
sale.net_amt as total_net_amount,
spare_line.prime_cost as prime_cost,
hsn_acc_tax.description as hsn_tax_invoice_name,
(spare_acc_tax.amount * 100) as tax_per,
spare_acc_tax.description as description,
(spare_acc_tax.amount * 100) as tax_per_val

from

kg_sale_invoice sale
left join ch_spare_invoice spare_line on (spare_line.header_id = sale.id)
left join kg_pumpmodel_master pump_type on (pump_type.id = spare_line.pump_id)
left join kg_hsn_master hsn on (hsn.id = spare_line.hsn_no)
left join account_tax hsn_acc_tax on(hsn_acc_tax.id=hsn.igst_id)
left join res_partner partner on (partner.id = sale.customer_id)

left join spare_invoice_taxes spare_tax on(spare_tax.spare_invoice_id=spare_line.id)

left join account_tax spare_acc_tax on(spare_acc_tax.id=spare_tax.tax_id)

left join res_country_state state on(state.id=partner.state_id)
left join res_company comp on(comp.id=sale.company_id)
left join res_partner comppart on(comppart.id=comp.partner_id)
left join res_city compcity on(compcity.id=comppart.city_id)
left join res_country_state compstate on(compstate.id=comppart.state_id)

where sale.state not in ('draft','cancel') and spare_line.header_id=$P{invoice_id}

union

select
sale.id as invoice_id,


sale.invoice_no as invoice_no,
to_char(sale.invoice_date,'dd-mm-yyyy') as invoice_date,
sale.customer_po_no as customer_po_no,
to_char(sale.cust_po_date,'dd-mm-yyyy') as cust_po_date,
case when pump_type.name is not null then
pump_type.name else '' end as off_name,
hsn.name as hsn_name,
acc_line.qty as qty,
acc_line.tax_tot as tax_tot,
acc_line.net_amount as net_amount,
acc_line.unit_price as unit_price,
sale.net_amt as total_net_amount,
acc_line.prime_cost as prime_cost,
hsn_acc_tax.description as hsn_tax_invoice_name,

(acc_acc_tax.amount * 100) as tax_per,
acc_acc_tax.description as description,
(acc_acc_tax.amount * 100) as tax_per_val

from

kg_sale_invoice sale

left join ch_accessories_invoice acc_line on (acc_line.header_id = sale.id)
left join kg_pumpmodel_master pump_type on (pump_type.id = acc_line.pump_id)
left join kg_hsn_master hsn on (hsn.id = acc_line.hsn_no)
left join account_tax hsn_acc_tax on(hsn_acc_tax.id=hsn.igst_id)
left join res_partner partner on (partner.id = sale.customer_id)
left join acc_invoice_taxes acc_tax on(acc_tax.acc_invoice_id=acc_line.id)
left join account_tax acc_acc_tax on(acc_acc_tax.id=acc_tax.tax_id)
left join res_country_state state on(state.id=partner.state_id)
left join res_company comp on(comp.id=sale.company_id)
left join res_partner comppart on(comppart.id=comp.partner_id)
left join res_city compcity on(compcity.id=comppart.city_id)
left join res_country_state compstate on(compstate.id=comppart.state_id)

where sale.state not in ('draft','cancel') and acc_line.header_id=$P{invoice_id}

) as sam

) as sample
group by 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16
) as fin

) as final order by off_name

) as ff order by off_name,ref -- Added for testing]]>
		</queryString>
		<field name="invoice_id" class="java.lang.Integer"/>
		<field name="invoice_no" class="java.lang.String"/>
		<field name="invoice_date" class="java.lang.String"/>
		<field name="customer_po_no" class="java.lang.String"/>
		<field name="cust_po_date" class="java.lang.String"/>
		<field name="off_name" class="java.lang.String"/>
		<field name="hsn_name" class="java.lang.String"/>
		<field name="qty" class="java.lang.Integer"/>
		<field name="net_amount" class="java.math.BigDecimal"/>
		<field name="total_net_amount" class="java.math.BigDecimal"/>
		<field name="prime_cost" class="java.lang.String"/>
		<field name="ref" class="java.lang.Long"/>
		<field name="max_ref" class="java.lang.Long"/>
		<field name="ref_pumpwise_tot" class="java.lang.String"/>
		<field name="ref_tax_tot" class="java.lang.String"/>
		<field name="hsn_tax_invoice_name" class="java.lang.String"/>
	</subDataset>
	<parameter name="invoice_id" class="java.lang.Integer"/>
	<queryString>
		<![CDATA[select invoice_id,company,comp_street,comp_street2,comp_city,comp_state,comp_zip,comp_fax,comp_phone,customer,
invoice_no,invoice_date,customer_po_no,cust_po_date,cus_state,
off_name,hsn_name,qty,tax_tot,net_amount,tax_per,tax_per_val,

trim(TO_CHAR((coalesce(total_net_amount + tax_gnd,0.00)), '999G999G99G999G99G99G990D99')) as total_net_amount,
trim(TO_CHAR((coalesce(tax_gnd,0.00)), '999G999G99G999G99G99G990D99')) as tax_gnd,
case when total_net_amount > 0 then
(select f_amount_to_words((total_net_amount + tax_gnd)::numeric,1)) else '' end as word_total_inv

from (

select invoice_id,company,comp_street,comp_street2,comp_city,comp_state,comp_zip,comp_fax,comp_phone,customer,
invoice_no,invoice_date,customer_po_no,cust_po_date,cus_state,
off_name,hsn_name,qty,tax_tot,net_amount,tax_per,tax_per_val,total_net_amount,

coalesce((sum(cgst_tax_val) OVER ()),0.00) as cgst_tax_gnd,
coalesce((sum(sgst_tax_val) OVER ()),0.00) as sgst_tax_gnd,
coalesce((sum(igst_tax_val) OVER ()),0.00) as igst_tax_gnd,
coalesce((sum(tax_tot) OVER ()),0.00) as tax_gnd
from (

select invoice_id,company,comp_street,comp_street2,comp_city,comp_state,comp_zip,comp_fax,comp_phone,customer,
invoice_no,invoice_date,customer_po_no,cust_po_date,cus_state,
off_name,hsn_name,qty,tax_tot,net_amount,tax_per,tax_per_val,total_net_amount,prime_cost,

case when cgst_tax is not null then
((qty*prime_cost)*tax_per_val)/100 else 0.00 end as cgst_tax_val,
case when sgst_tax is not null then
((qty*prime_cost)*tax_per_val)/100 else 0.00 end as sgst_tax_val,
case when igst_tax is not null then
((qty*prime_cost)*tax_per_val)/100 else 0.00 end as igst_tax_val,

case when cgst_tax is not null then
'9%' end as cgst_rate,
case when sgst_tax is not null then
'9%' end as sgst_rate,
case when igst_tax is not null then
'18%' end as igst_rate
from (

select invoice_id,company,comp_street,comp_street2,comp_city,comp_state,comp_zip,comp_fax,comp_phone,customer,
invoice_no,invoice_date,customer_po_no,cust_po_date,cus_state,
off_name,hsn_name,qty,tax_tot,net_amount,tax_per,tax_per_val,total_net_amount,prime_cost,
max(cgst_tax) as cgst_tax,
max(sgst_tax) as sgst_tax,
max(igst_tax) as igst_tax
from (

select invoice_id,company,comp_street,comp_street2,comp_city,comp_state,comp_zip,comp_fax,comp_phone,customer,
invoice_no,invoice_date,customer_po_no,cust_po_date,cus_state,
off_name,hsn_name,qty,tax_tot,net_amount,tax_per,tax_per_val,total_net_amount,prime_cost,

case when description ilike '%CGST%' then description end as cgst_tax,
case when description ilike '%SGST%' then description end as sgst_tax,
case when description ilike '%IGST%' then description end as igst_tax

from (

select
sale.id as invoice_id,

comp.name as company,

(CASE WHEN comppart.street is null THEN '' ELSE comppart.street end) as comp_street,
(CASE WHEN comppart.street2 is null THEN '' ELSE comppart.street2 end) as comp_street2,
(CASE WHEN compcity.name is null THEN '' ELSE compcity.name end) as comp_city,
(CASE WHEN compstate.name is null THEN '' ELSE compstate.name end) as comp_state,
(CASE WHEN comppart.zip is null THEN ''ELSE comppart.zip end) as comp_zip,
(CASE WHEN comppart.fax is null THEN ''ELSE comppart.fax end) as comp_fax,
(CASE WHEN comppart.phone is null THEN ''ELSE comppart.phone end) as comp_phone,
partner.name as customer,
state.name as cus_state,
case when sale.name is not null then
sale.name else '' end as invoice_no,
case when sale.invoice_date is not null then
to_char(sale.invoice_date,'dd-mm-yyyy') else '' end as invoice_date,
case when sale.customer_po_no is not null then
sale.customer_po_no else '' end as customer_po_no,
case when sale.cust_po_date is not null then
to_char(sale.cust_po_date,'dd-mm-yyyy') else '' end as cust_po_date,

case when pump_type.name is not null then
pump_type.name else '' end as off_name,
hsn.name as hsn_name,
pump_line.qty as qty,
pump_line.tax_tot as tax_tot,
pump_line.net_amount as net_amount,
sale.net_amt as total_net_amount,
pump_line.prime_cost as prime_cost,

(pump_acc_tax.amount * 100) as tax_per,
pump_acc_tax.description as description,
(pump_acc_tax.amount * 100) as tax_per_val

from

kg_sale_invoice sale
left join ch_pumpspare_invoice pump_line on (pump_line.header_id = sale.id)
left join kg_pumpmodel_master pump_type on (pump_type.id = pump_line.pump_model_id)
left join kg_hsn_master hsn on (hsn.id = pump_line.hsn_no)
left join res_partner partner on (partner.id = sale.customer_id)

left join pump_invoice_taxes pump_tax on(pump_tax.pump_invoice_id=pump_line.id)
left join account_tax pump_acc_tax on(pump_acc_tax.id=pump_tax.tax_id)
left join res_country_state state on(state.id=partner.state_id)
left join res_company comp on(comp.id=sale.company_id)
left join res_partner comppart on(comppart.id=comp.partner_id)
left join res_city compcity on(compcity.id=comppart.city_id)
left join res_country_state compstate on(compstate.id=comppart.state_id)

where sale.state not in ('draft','cancel') and pump_line.header_id=$P{invoice_id}
union

select
sale.id as invoice_id,
comp.name as company,

(CASE WHEN comppart.street is null THEN '' ELSE comppart.street end) as comp_street,
(CASE WHEN comppart.street2 is null THEN '' ELSE comppart.street2 end) as comp_street2,
(CASE WHEN compcity.name is null THEN '' ELSE compcity.name end) as comp_city,
(CASE WHEN compstate.name is null THEN '' ELSE compstate.name end) as comp_state,
(CASE WHEN comppart.zip is null THEN ''ELSE comppart.zip end) as comp_zip,
(CASE WHEN comppart.fax is null THEN ''ELSE comppart.fax end) as comp_fax,
(CASE WHEN comppart.phone is null THEN ''ELSE comppart.phone end) as comp_phone,
partner.name as customer,
state.name as cus_state,
sale.name as invoice_no,
to_char(sale.invoice_date,'dd-mm-yyyy') as invoice_date,
sale.customer_po_no as customer_po_no,
to_char(sale.cust_po_date,'dd-mm-yyyy') as cust_po_date,
spare_line.off_name as off_name,
hsn.name as hsn_name,
spare_line.qty as qty,
spare_line.tax_tot as tax_tot,
spare_line.net_amount as net_amount,
sale.net_amt as total_net_amount,
spare_line.prime_cost as prime_cost,
(spare_acc_tax.amount * 100) as tax_per,
spare_acc_tax.description as description,
(spare_acc_tax.amount * 100) as tax_per_val

from

kg_sale_invoice sale
left join ch_spare_invoice spare_line on (spare_line.header_id = sale.id)
left join kg_pumpmodel_master pump_type on (pump_type.id = spare_line.pump_id)
left join kg_hsn_master hsn on (hsn.id = spare_line.hsn_no)
left join res_partner partner on (partner.id = sale.customer_id)

left join spare_invoice_taxes spare_tax on(spare_tax.spare_invoice_id=spare_line.id)

left join account_tax spare_acc_tax on(spare_acc_tax.id=spare_tax.tax_id)

left join res_country_state state on(state.id=partner.state_id)
left join res_company comp on(comp.id=sale.company_id)
left join res_partner comppart on(comppart.id=comp.partner_id)
left join res_city compcity on(compcity.id=comppart.city_id)
left join res_country_state compstate on(compstate.id=comppart.state_id)

where sale.state not in ('draft','cancel') and spare_line.header_id=$P{invoice_id}

union

select
sale.id as invoice_id,
comp.name as company,
(CASE WHEN comppart.street is null THEN '' ELSE comppart.street end) as comp_street,
(CASE WHEN comppart.street2 is null THEN '' ELSE comppart.street2 end) as comp_street2,
(CASE WHEN compcity.name is null THEN '' ELSE compcity.name end) as comp_city,
(CASE WHEN compstate.name is null THEN '' ELSE compstate.name end) as comp_state,
(CASE WHEN comppart.zip is null THEN ''ELSE comppart.zip end) as comp_zip,
(CASE WHEN comppart.fax is null THEN ''ELSE comppart.fax end) as comp_fax,
(CASE WHEN comppart.phone is null THEN ''ELSE comppart.phone end) as comp_phone,
partner.name as customer,
state.name as cus_state,
sale.name as invoice_no,
to_char(sale.invoice_date,'dd-mm-yyyy') as invoice_date,
sale.customer_po_no as customer_po_no,
to_char(sale.cust_po_date,'dd-mm-yyyy') as cust_po_date,
acc_line.off_name as off_name,
hsn.name as hsn_name,
acc_line.qty as qty,
acc_line.tax_tot as tax_tot,
acc_line.net_amount as net_amount,
sale.net_amt as total_net_amount,
acc_line.prime_cost as prime_cost,

(acc_acc_tax.amount * 100) as tax_per,
acc_acc_tax.description as description,
(acc_acc_tax.amount * 100) as tax_per_val

from

kg_sale_invoice sale

left join ch_accessories_invoice acc_line on (acc_line.header_id = sale.id)
left join kg_pumpmodel_master pump_type on (pump_type.id = acc_line.pump_id)
left join kg_hsn_master hsn on (hsn.id = acc_line.hsn_no)
left join res_partner partner on (partner.id = sale.customer_id)
left join acc_invoice_taxes acc_tax on(acc_tax.acc_invoice_id=acc_line.id)
left join account_tax acc_acc_tax on(acc_acc_tax.id=acc_tax.tax_id)
left join res_country_state state on(state.id=partner.state_id)
left join res_company comp on(comp.id=sale.company_id)
left join res_partner comppart on(comppart.id=comp.partner_id)
left join res_city compcity on(compcity.id=comppart.city_id)
left join res_country_state compstate on(compstate.id=comppart.state_id)

where sale.state not in ('draft','cancel') and acc_line.header_id=$P{invoice_id}

) as sam

) as sample
group by 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24
) as fin

) as final

) as w_fin limit 1]]>
	</queryString>
	<field name="invoice_id" class="java.lang.Integer"/>
	<field name="company" class="java.lang.String"/>
	<field name="comp_street" class="java.lang.String"/>
	<field name="comp_street2" class="java.lang.String"/>
	<field name="comp_city" class="java.lang.String"/>
	<field name="comp_state" class="java.lang.String"/>
	<field name="comp_zip" class="java.lang.String"/>
	<field name="comp_fax" class="java.lang.String"/>
	<field name="comp_phone" class="java.lang.String"/>
	<field name="customer" class="java.lang.String"/>
	<field name="invoice_no" class="java.lang.String"/>
	<field name="invoice_date" class="java.lang.String"/>
	<field name="customer_po_no" class="java.lang.String"/>
	<field name="cust_po_date" class="java.lang.String"/>
	<field name="cus_state" class="java.lang.String"/>
	<field name="off_name" class="java.lang.String"/>
	<field name="hsn_name" class="java.lang.String"/>
	<field name="qty" class="java.lang.Integer"/>
	<field name="tax_tot" class="java.math.BigDecimal"/>
	<field name="net_amount" class="java.math.BigDecimal"/>
	<field name="tax_per" class="java.math.BigDecimal"/>
	<field name="tax_per_val" class="java.math.BigDecimal"/>
	<field name="total_net_amount" class="java.lang.String"/>
	<field name="tax_gnd" class="java.lang.String"/>
	<field name="word_total_inv" class="java.lang.String"/>
	<group name="ProjectGroup" isStartNewPage="true">
		<groupExpression><![CDATA[]]></groupExpression>
		<groupHeader>
			<band height="194">
				<textField>
					<reportElement mode="Transparent" x="1" y="0" width="554" height="13"/>
					<box topPadding="2"/>
					<textElement textAlignment="Center">
						<font size="8" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{company}]]></textFieldExpression>
				</textField>
				<textField isBlankWhenNull="true">
					<reportElement mode="Transparent" x="0" y="60" width="555" height="26"/>
					<box topPadding="3">
						<topPen lineWidth="0.0"/>
						<leftPen lineWidth="0.0"/>
						<bottomPen lineWidth="0.0"/>
						<rightPen lineWidth="0.0"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="8" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA["PROFORMA INVOICE"]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement stretchType="RelativeToTallestObject" mode="Transparent" x="0" y="86" width="369" height="23"/>
					<box leftPadding="2">
						<topPen lineWidth="0.75"/>
						<leftPen lineWidth="0.75"/>
						<bottomPen lineWidth="0.75"/>
						<rightPen lineWidth="0.75"/>
					</box>
					<textElement verticalAlignment="Middle">
						<font size="8" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA["M/s."+$F{customer}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement stretchType="RelativeToTallestObject" mode="Transparent" x="0" y="109" width="369" height="23"/>
					<box leftPadding="2">
						<topPen lineWidth="0.75"/>
						<leftPen lineWidth="0.75"/>
						<bottomPen lineWidth="0.75"/>
						<rightPen lineWidth="0.75"/>
					</box>
					<textElement verticalAlignment="Middle">
						<font size="8" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{cus_state}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement stretchType="RelativeToTallestObject" mode="Transparent" x="0" y="132" width="555" height="23"/>
					<box leftPadding="2">
						<topPen lineWidth="0.75"/>
						<leftPen lineWidth="0.75"/>
						<bottomPen lineWidth="0.75"/>
						<rightPen lineWidth="0.75"/>
					</box>
					<textElement verticalAlignment="Middle">
						<font size="8" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA["Your Order No : "+$F{customer_po_no}+"   Dated : "+$F{invoice_date}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement stretchType="RelativeToTallestObject" mode="Transparent" x="369" y="86" width="186" height="23"/>
					<box leftPadding="2">
						<topPen lineWidth="0.75"/>
						<leftPen lineWidth="0.75"/>
						<bottomPen lineWidth="0.75"/>
						<rightPen lineWidth="0.75"/>
					</box>
					<textElement verticalAlignment="Middle">
						<font size="8" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA["Invoice No : "+$F{invoice_no}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement stretchType="RelativeToTallestObject" mode="Transparent" x="0" y="155" width="555" height="22"/>
					<box leftPadding="2">
						<topPen lineWidth="0.75"/>
						<leftPen lineWidth="0.75"/>
						<bottomPen lineWidth="0.75"/>
						<rightPen lineWidth="0.75"/>
					</box>
					<textElement verticalAlignment="Middle">
						<font size="8" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA["Our Ref : "+$F{invoice_no}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement stretchType="RelativeToTallestObject" mode="Transparent" x="369" y="109" width="186" height="23"/>
					<box leftPadding="2">
						<topPen lineWidth="0.75"/>
						<leftPen lineWidth="0.75"/>
						<bottomPen lineWidth="0.75"/>
						<rightPen lineWidth="0.75"/>
					</box>
					<textElement verticalAlignment="Middle">
						<font size="8" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA["DT : "+$F{invoice_date}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="64" y="13" width="432" height="15"/>
					<box topPadding="2"/>
					<textElement textAlignment="Center">
						<font size="9"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{comp_street}+''+$F{comp_street2}+''+$F{comp_city}+''+$F{comp_state}+''+$F{comp_zip}+'.']]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="140" y="28" width="282" height="13"/>
					<box topPadding="0"/>
					<textElement textAlignment="Center">
						<font size="9"/>
					</textElement>
					<textFieldExpression><![CDATA['Tel : '+$F{comp_phone}+',  Fax : '+$F{comp_fax}]]></textFieldExpression>
				</textField>
				<image>
					<reportElement x="2" y="0" width="40" height="43"/>
					<box>
						<topPen lineWidth="0.0"/>
						<leftPen lineWidth="0.0"/>
						<bottomPen lineWidth="0.0"/>
						<rightPen lineWidth="0.0"/>
					</box>
					<imageExpression><![CDATA["/OpenERP/Sam_Turbo/openerp-foundry/openerp-server/openerp/addons/kg_crm_offer/img/sam.png"]]></imageExpression>
				</image>
				<image>
					<reportElement x="503" y="0" width="52" height="43"/>
					<box>
						<topPen lineWidth="0.0"/>
						<leftPen lineWidth="0.0"/>
						<bottomPen lineWidth="0.0"/>
						<rightPen lineWidth="0.0"/>
					</box>
					<imageExpression><![CDATA["/OpenERP/Sam_Turbo/openerp-foundry/openerp-server/openerp/addons/kg_crm_offer/img/TUV_NORD.bmp"]]></imageExpression>
				</image>
				<textField>
					<reportElement mode="Transparent" x="0" y="41" width="555" height="19"/>
					<box topPadding="2">
						<topPen lineWidth="0.5"/>
					</box>
					<textElement textAlignment="Center">
						<font size="8" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA["CIN No :U29199T2159SPTCO555J6"]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement stretchType="RelativeToTallestObject" mode="Transparent" x="0" y="177" width="64" height="17"/>
					<box leftPadding="2">
						<topPen lineWidth="0.75"/>
						<leftPen lineWidth="0.75"/>
						<bottomPen lineWidth="0.75"/>
						<rightPen lineWidth="0.75"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="8" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA["NO."]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement stretchType="RelativeToTallestObject" mode="Transparent" x="64" y="177" width="234" height="17"/>
					<box leftPadding="2">
						<topPen lineWidth="0.75"/>
						<leftPen lineWidth="0.75"/>
						<bottomPen lineWidth="0.75"/>
						<rightPen lineWidth="0.75"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="8" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA["Description"]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement stretchType="RelativeToTallestObject" mode="Transparent" x="298" y="177" width="71" height="17"/>
					<box leftPadding="2">
						<topPen lineWidth="0.75"/>
						<leftPen lineWidth="0.75"/>
						<bottomPen lineWidth="0.75"/>
						<rightPen lineWidth="0.75"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="8" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA["Qty."]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement stretchType="RelativeToTallestObject" mode="Transparent" x="369" y="177" width="73" height="17"/>
					<box leftPadding="2">
						<topPen lineWidth="0.75"/>
						<leftPen lineWidth="0.75"/>
						<bottomPen lineWidth="0.75"/>
						<rightPen lineWidth="0.75"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="8" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA["Rate(in Rs)"]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement stretchType="RelativeToTallestObject" mode="Transparent" x="442" y="177" width="113" height="17"/>
					<box leftPadding="2">
						<topPen lineWidth="0.75"/>
						<leftPen lineWidth="0.75"/>
						<bottomPen lineWidth="0.75"/>
						<rightPen lineWidth="0.75"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="8" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA["Total (in Rs)"]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
	</group>
	<group name="Table Heading">
		<groupExpression><![CDATA[]]></groupExpression>
	</group>
	<group name="DesignationGroup" isStartNewPage="true">
		<groupExpression><![CDATA[]]></groupExpression>
	</group>
	<group name="Label" isReprintHeaderOnEachPage="true">
		<groupExpression><![CDATA[]]></groupExpression>
	</group>
	<group name="work_order" isReprintHeaderOnEachPage="true">
		<groupExpression><![CDATA[]]></groupExpression>
	</group>
	<group name="Project line1">
		<groupExpression><![CDATA[$F{invoice_id}]]></groupExpression>
		<groupHeader>
			<band height="40">
				<componentElement>
					<reportElement x="0" y="0" width="555" height="40"/>
					<jr:list xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd" printOrder="Vertical">
						<datasetRun subDataset="dataset1">
							<datasetParameter name="invoice_id">
								<datasetParameterExpression><![CDATA[$F{invoice_id}]]></datasetParameterExpression>
							</datasetParameter>
							<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
						</datasetRun>
						<jr:listContents height="40" width="555">
							<textField>
								<reportElement x="0" y="0" width="64" height="20"/>
								<box topPadding="2">
									<topPen lineWidth="0.75"/>
									<leftPen lineWidth="0.75"/>
									<bottomPen lineWidth="0.75"/>
									<rightPen lineWidth="0.75"/>
								</box>
								<textElement textAlignment="Center"/>
								<textFieldExpression><![CDATA[$V{REPORT_COUNT}]]></textFieldExpression>
							</textField>
							<textField>
								<reportElement x="64" y="0" width="234" height="20"/>
								<box topPadding="2" leftPadding="2">
									<topPen lineWidth="0.75"/>
									<leftPen lineWidth="0.75"/>
									<bottomPen lineWidth="0.75"/>
									<rightPen lineWidth="0.75"/>
								</box>
								<textElement/>
								<textFieldExpression><![CDATA["Pump Type :" +$F{off_name}+"- HSN CODE "+$F{hsn_name}]]></textFieldExpression>
							</textField>
							<textField>
								<reportElement x="298" y="0" width="71" height="20"/>
								<box topPadding="2" rightPadding="2">
									<topPen lineWidth="0.75"/>
									<leftPen lineWidth="0.75"/>
									<bottomPen lineWidth="0.75"/>
									<rightPen lineWidth="0.75"/>
								</box>
								<textElement textAlignment="Right"/>
								<textFieldExpression><![CDATA[$F{qty}]]></textFieldExpression>
							</textField>
							<textField>
								<reportElement x="369" y="0" width="73" height="20"/>
								<box topPadding="2" rightPadding="2">
									<topPen lineWidth="0.75"/>
									<leftPen lineWidth="0.75"/>
									<bottomPen lineWidth="0.75"/>
									<rightPen lineWidth="0.75"/>
								</box>
								<textElement textAlignment="Right"/>
								<textFieldExpression><![CDATA[$F{prime_cost}]]></textFieldExpression>
							</textField>
							<textField>
								<reportElement x="442" y="0" width="113" height="20"/>
								<box topPadding="2" rightPadding="2">
									<topPen lineWidth="0.75"/>
									<leftPen lineWidth="0.75"/>
									<bottomPen lineWidth="0.75"/>
									<rightPen lineWidth="0.75"/>
								</box>
								<textElement textAlignment="Right"/>
								<textFieldExpression><![CDATA[$F{net_amount}]]></textFieldExpression>
							</textField>
							<textField isBlankWhenNull="true">
								<reportElement x="64" y="20" width="234" height="20" isRemoveLineWhenBlank="true">
									<printWhenExpression><![CDATA[$F{ref}==$F{max_ref}]]></printWhenExpression>
								</reportElement>
								<box topPadding="2">
									<topPen lineWidth="0.75"/>
									<leftPen lineWidth="0.75"/>
									<bottomPen lineWidth="0.75"/>
									<rightPen lineWidth="0.75"/>
								</box>
								<textElement textAlignment="Center"/>
								<textFieldExpression><![CDATA["ADD : GST @ "+$F{hsn_tax_invoice_name}+" ON Rs. "+$F{ref_pumpwise_tot}]]></textFieldExpression>
							</textField>
							<textField isBlankWhenNull="true">
								<reportElement x="442" y="20" width="113" height="20" isRemoveLineWhenBlank="true">
									<printWhenExpression><![CDATA[$F{ref}==$F{max_ref}]]></printWhenExpression>
								</reportElement>
								<box topPadding="2" rightPadding="2">
									<topPen lineWidth="0.75"/>
									<leftPen lineWidth="0.75"/>
									<bottomPen lineWidth="0.75"/>
									<rightPen lineWidth="0.75"/>
								</box>
								<textElement textAlignment="Right"/>
								<textFieldExpression><![CDATA[$F{ref_tax_tot}]]></textFieldExpression>
							</textField>
							<textField isBlankWhenNull="true">
								<reportElement x="298" y="20" width="71" height="20" isRemoveLineWhenBlank="true">
									<printWhenExpression><![CDATA[$F{ref}==$F{max_ref}]]></printWhenExpression>
								</reportElement>
								<box topPadding="2">
									<topPen lineWidth="0.75"/>
									<leftPen lineWidth="0.75"/>
									<bottomPen lineWidth="0.75"/>
									<rightPen lineWidth="0.75"/>
								</box>
								<textElement textAlignment="Center"/>
								<textFieldExpression><![CDATA["-"]]></textFieldExpression>
							</textField>
							<textField isBlankWhenNull="true">
								<reportElement x="0" y="20" width="64" height="20" isRemoveLineWhenBlank="true">
									<printWhenExpression><![CDATA[$F{ref}==$F{max_ref}]]></printWhenExpression>
								</reportElement>
								<box topPadding="2">
									<topPen lineWidth="0.75"/>
									<leftPen lineWidth="1.0"/>
									<bottomPen lineWidth="0.75"/>
									<rightPen lineWidth="0.75"/>
								</box>
								<textElement textAlignment="Center"/>
								<textFieldExpression><![CDATA["-"]]></textFieldExpression>
							</textField>
							<textField isBlankWhenNull="true">
								<reportElement x="369" y="20" width="73" height="20" isRemoveLineWhenBlank="true">
									<printWhenExpression><![CDATA[$F{ref}==$F{max_ref}]]></printWhenExpression>
								</reportElement>
								<box topPadding="2">
									<topPen lineWidth="0.75"/>
									<leftPen lineWidth="0.75"/>
									<bottomPen lineWidth="0.75"/>
									<rightPen lineWidth="0.75"/>
								</box>
								<textElement textAlignment="Center"/>
								<textFieldExpression><![CDATA["-"]]></textFieldExpression>
							</textField>
						</jr:listContents>
					</jr:list>
				</componentElement>
			</band>
		</groupHeader>
	</group>
	<group name="Project Line2">
		<groupExpression><![CDATA[$F{invoice_id}]]></groupExpression>
		<groupHeader>
			<band height="250">
				<textField>
					<reportElement x="64" y="0" width="378" height="20"/>
					<box topPadding="2" rightPadding="2">
						<topPen lineWidth="0.75"/>
						<leftPen lineWidth="0.75"/>
						<bottomPen lineWidth="0.75"/>
						<rightPen lineWidth="0.75"/>
					</box>
					<textElement textAlignment="Right">
						<font isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA["NET AMOUNT PAYABLE"]]></textFieldExpression>
				</textField>
				<textField isBlankWhenNull="true">
					<reportElement x="0" y="0" width="64" height="20"/>
					<box>
						<topPen lineWidth="0.75"/>
						<leftPen lineWidth="0.75"/>
						<bottomPen lineWidth="0.75"/>
						<rightPen lineWidth="0.75"/>
					</box>
					<textElement/>
				</textField>
				<textField>
					<reportElement x="442" y="0" width="113" height="20"/>
					<box topPadding="2" rightPadding="2">
						<topPen lineWidth="0.75"/>
						<leftPen lineWidth="0.75"/>
						<bottomPen lineWidth="0.75"/>
						<rightPen lineWidth="0.75"/>
					</box>
					<textElement textAlignment="Right">
						<font isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{total_net_amount}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="0" y="20" width="555" height="37"/>
					<box topPadding="4" leftPadding="8">
						<topPen lineWidth="0.75"/>
						<leftPen lineWidth="0.75"/>
						<rightPen lineWidth="0.75"/>
					</box>
					<textElement>
						<font isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA["( "+$F{word_total_inv}+" )"]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="0" y="57" width="555" height="22"/>
					<box topPadding="1" leftPadding="6">
						<leftPen lineWidth="0.75"/>
						<bottomPen lineWidth="0.75"/>
						<rightPen lineWidth="0.75"/>
					</box>
					<textElement>
						<font isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA["E & o.E"]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement stretchType="RelativeToTallestObject" mode="Transparent" x="298" y="96" width="257" height="21"/>
					<box topPadding="0" bottomPadding="0">
						<topPen lineWidth="0.0"/>
						<leftPen lineWidth="0.0"/>
						<bottomPen lineWidth="0.0"/>
						<rightPen lineWidth="0.0"/>
					</box>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font size="8" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA["FOR SAM TURBO INDUSTRY PVT LTD"]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement stretchType="RelativeToTallestObject" mode="Transparent" x="298" y="184" width="257" height="21"/>
					<box topPadding="0" bottomPadding="0">
						<topPen lineWidth="0.0"/>
						<leftPen lineWidth="0.0"/>
						<bottomPen lineWidth="0.0"/>
						<rightPen lineWidth="0.0"/>
					</box>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font size="8" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA["Authority Signatory"]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<noData>
		<band height="20">
			<staticText>
				<reportElement mode="Transparent" x="0" y="0" width="555" height="20"/>
				<textElement textAlignment="Center"/>
				<text><![CDATA[No Records Found]]></text>
			</staticText>
		</band>
	</noData>
</jasperReport>
