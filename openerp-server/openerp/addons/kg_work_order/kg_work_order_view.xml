<?xml version="1.0" encoding="utf-8"?>
<openerp>
	<data>

	<!-- Form View Start -->
	

		<record id="t_form_v_work_order" model="ir.ui.view">
			<field name="name">Work Order Entry Form</field>
			<field name="model">kg.work.order</field>
			<field name="arch" type="xml">
				<form string="Work Order" version="7.0" create="false">
					<header>
						<button name="mkt_approve" type="object" string="WFMKT Approval" states="draft" class="oe_highlight" confirm="Are you sure to proceed ?"
							/>
						<button name="design_approve" type="object" string="WFD Approval" states="mkt_approved" class="oe_highlight" confirm="Are you sure to proceed ?"
							/>
						<button name="special_approve" type="object" string="Special Approval" class="oe_highlight" confirm="Are you sure to proceed ?"
							attrs="{'invisible': ['|',('state','!=','design_approved'),('wo_spc_app_flag','=',False)]}" groups="kg_users_mgt.group_planning_admin"/>
						<button name="entry_confirm" type="object" string="WFMD Approval" class="oe_highlight" confirm="Are you sure to proceed ?"
							attrs="{'invisible': ['|',('state','!=','design_approved'),('wo_spc_app_flag','=',True)]}"/>
						<button name="send_to_dms" type="object" string="DMS" class="oe_highlight"/>
						<button name="wo_copy" type="object" string="WO Copy" class="oe_highlight"/>
					</header>
					<group>
						<group>
							<field name="name" attrs="{'readonly': [('state','in',['confirmed','cancel'])],'required': [('state','!=','draft')]}"/>
							<field name="offer_no" readonly="1"/>
							<field name="enquiry_no" readonly="1"/>
							<field name="division_id"/>
							<field name="drawing_approval" attrs="{'readonly': [('state','in',['confirmed','cancel'])]}"/>
							<field name="inspection" attrs="{'readonly': [('state','in',['confirmed','cancel'])]}" />
							<field name="order_category" on_change="onchange_order_category_delivery_date(order_category,order_priority)" string="Purpose" required="1" attrs="{'readonly': [('state','in',['confirmed','cancel'])]}"/>
							<field name="partner_id" required="1" attrs="{'readonly': [('state','in',['confirmed','cancel'])]}"/>
							<field name="project_name" attrs="{'readonly': [('state','in',['confirmed','cancel'])]}"/>
							<field name="delivery_date" on_change="onchange_delivery_date(delivery_date,order_category,order_priority)" attrs="{'readonly': [('state','in',['confirmed','cancel'])]}"/>
							<field name="flag_cancel" invisible="1"/>
							<field name="entry_mode" invisible="1"/>
							<field name="delivery_date_flag" invisible="1"/>
							<field name="wo_spc_app_flag" invisible="1"/>
							<field name="design_flag" invisible="1"/>
							<field name="stock_check" required="1" attrs="{'readonly': [('state','in',['confirmed','cancel'])]}"/>
							<field name="flag_data_bank" readonly="1"/>
						</group>											
						<group>
							<field name="entry_date" attrs="{'readonly': [('state','in',['confirmed','cancel'])]}"/>
							<field name="location" required="1" attrs="{'readonly': [('state','in',['confirmed','cancel'])]}"/>
							<field name="excise_duty" attrs="{'readonly': [('state','in',['confirmed','cancel'])]}"/>
							<field name="road_permit" attrs="{'readonly': [('state','in',['confirmed','cancel'])]}"/>
							<field name="l_d_clause" attrs="{'readonly': [('state','in',['confirmed','cancel'])]}"/>
							<field name="order_priority" on_change="onchange_order_priority_delivery_date(order_category,order_priority)" attrs="{'readonly': [('state','in',['confirmed','cancel'])],'required': [('state','!=','draft')]}"/>
							<field name="order_value" string="WO Value" readonly="1"/>
							<field name="state"  style="width: 30%%" class="att_state_change"/>
							<field name="remarks" string="Remarks" attrs="{'readonly': [('state','in',['confirmed','cancel'])]}"/>
							<field name="rep_data" readonly="1" width="100" filename="wo_copy"/>
						</group>					
					</group>
					<notebook>
						<page string="Work Order Details" >
							<field colspan="4" name="line_ids" nolabel="1" attrs="{'readonly': [('state','in',['confirmed','cancel'])]}" widget="one2many_list"
								context="{'order_category':order_category,'delivery_date':delivery_date,'order_no':name,
								 'drawing_approval':drawing_approval,'inspection':inspection,'flag_select_all':True}">
								<tree string = "Work Order Items">
									<field name="order_no"/>
									<field name="order_category" />
									<field name="pump_model_id" />
									<field name="qty" sum="Total Qty"/>
									<field name="unit_price" sum="unit_price"/>
									<field name="delivery_date"/>
								</tree>
							</field>
						</page>
						<page string="Entry Info">
							<group>
								<field name="company_id"/>
							</group>
							<group>
								<field name="active"/>
							</group>
							<group>
								<group>
									<field name="user_id"/>
									<field name="confirm_user_id" attrs="{'invisible':[('state','in',['draft'])]}"/>
									<field name="cancel_user_id" attrs="{'invisible':[('state','not in',['cancel'])]}"/>
									<field name="update_user_id"/>
								</group>
								<group>
									<field name="crt_date"/>
									<field name="confirm_date" attrs="{'invisible':[('state','in',['draft'])]}"/>
									<field name="cancel_date" attrs="{'invisible':[('state','not in',['cancel'])]}"/>
									<field name="update_date"/>
								</group>
							</group>
						</page>
					</notebook>
				</form>
			</field>
		</record>
		
	<!-- Form View End -->
		
	
	<!-- Tree View Start -->
		
		<record id="t_tree_v_work_order" model="ir.ui.view">
			<field name="name">Work Order Entry Tree</field>
			<field name="model">kg.work.order</field>
			<field eval="8" name="priority"/>
			<field name="arch" type="xml">
				<tree colors="blue:state == 'draft';black:state == 'confirmed';gray:state == 'cancel'" 
								toolbar="True" string="Work Order Entry Tree" >					
					<field name="name"/>
					<field name="enquiry_no"/>
					<field name="offer_no"/>
					<field name="entry_date"/>
					<field name="version" string="Revision"/>
					<field name="division_id" invisible="1"/>
					<field name="location"/>
					<field name="order_priority"/>
					<field name="order_category"/>
					<field name="delivery_date"/>
					<field name="order_value" sum="Total Value"/>
					<button name="send_to_dms" type="object" string="DMS" icon="terp-folder-blue"/>
					<field name="state"/>
				</tree>
			</field>
		</record>
		
		
		
		<record id="t_tree_app_v_work_order" model="ir.ui.view">
			<field name="name">Work Order Entry Tree</field>
			<field name="model">kg.work.order</field>
			<field eval="8" name="priority"/>
			<field name="arch" type="xml">
				<tree colors="blue:state == 'draft';black:state == 'confirmed';gray:state == 'cancel'" 
								toolbar="True" string="Work Order Entry Tree" create="false" >					
					<field name="name"/>
					<field name="enquiry_no"/>
					<field name="offer_no"/>
					<field name="entry_date"/>
					<field name="version" string="Revision"/>
					<field name="division_id" invisible="1"/>
					<field name="location"/>
					<field name="order_priority"/>
					<field name="order_category"/>
					<field name="delivery_date"/>
					<field name="order_value" sum="Total Value"/>
					<button name="send_to_dms" type="object" string="DMS" icon="terp-folder-blue"/>
					<field name="state"/>
				</tree>
			</field>
		</record>
		
	<!-- Tree View End -->
	
	
	<!-- Child Class Tree View Start -->
		
		<record id="t_tree_v_work_order_details" model="ir.ui.view">
			<field name="name">Work Order Details Entry Tree</field>
			<field name="model">ch.work.order.details</field>
			<field eval="8" name="priority"/>
			<field name="arch" type="xml">
				<tree string="Work Order Details Entry Tree" 
					colors="blue:state == 'draft';red:state == 'mkt_approved';violet:state == 'design_approved';gray:state == 'cancel';black:state == 'confirmed'" toolbar="1">	
									
					<field name="order_no"/>
					<field name="order_date"/>
					
					<field name="order_category"/>
					<field name="pump_model_id"/>
					<field name="qty" sum="Total Qty"/>
					<field name="unit_price" sum="Total Price"/>
					<field name="delivery_date"/>
					
				    <field name="state" invisible="1"/>
				</tree>
			</field>
		</record>
		
	<!-- Child Class Tree View End -->
	
	<!-- Child Class Form View Start -->
		
		<record id="t_form_v_work_order_details" model="ir.ui.view">
			<field name="name">Work Order Details Entry Form</field>
			<field name="model">ch.work.order.details</field>
			<field eval="8" name="priority"/>
			<field name="arch" type="xml">
				<form string="Work Order Details Entry Form" version="7.0" delete="false">
					<group>
						<group>
							<field name="order_no" required="1"/>
							<field name="pump_model_id" attrs="{'readonly': [('flag_load_bom','!=',False)]}"/>
							<field name="order_ref_no" invisible="1" attrs="{'readonly': [('state','in',['confirmed','cancel'])]}"/>
							<field name="moc_construction_id" on_change="onchange_moccons_name(moc_construction_id)" required="1"  attrs="{'readonly': [('flag_load_bom','!=',False)]}"/>
							<field name="qap_plan_id"/>
							<field name="rpm"   attrs="{'readonly': [('flag_load_bom','!=',False)], 'required': [('pump_model_type','=','vertical')]}"/>
							<field name="bed_length"  invisible="1"/>
							<field name="motor_power"  attrs="{'readonly': [('flag_load_bom','!=',False)], 'required': [('pump_model_type','=','vertical')]}"/>
							<field name="delivery_pipe_size"  attrs="{'readonly': [('flag_load_bom','!=',False)], 'required': [('pump_model_type','=','vertical')]}"/>
							<field name="bush_bearing"  attrs="{'readonly': [('flag_load_bom','!=',False)], 'required': [('pump_model_type','=','vertical')]}"/>
							<field name="flange_standard"  readonly="0"/>
							<field name="bp" invisible="1"/>
							<field name="m_power" attrs="{'readonly': [('flag_load_bom','!=',False)], 'required': [('pump_model_type','=','vertical')]}"/>
							<field name="drawing_approval" attrs="{'readonly': [('flag_load_bom','!=',False)],'invisible': [('order_category','=','access')]}"/>
							<field name="inspection" attrs="{'readonly': [('flag_load_bom','!=',False)],'invisible': [('order_category','=','access')]}"/>
							<field name="size_suctionx"/>
							<field name="consistency"/>
							<field name="unit_price"  attrs="{'readonly': [('flag_load_bom','!=',False)]}"/>
							<field name="flag_standard"  attrs="{'readonly': [('flag_load_bom','!=',False)], 'required': [('pump_model_type','=','vertical')]}"/>
							<field name="state" invisible="1"/>
							<field name="flag_cancel" invisible="1"/>
							<!--<field name="cancel_remark" attrs="{'invisible': [('flag_cancel','=',False)], 'readonly': [('state','in',['cancel'])]}"/>
							<group attrs="{'invisible': [('flag_cancel','=',False)]}">
								<button name="entry_cancel" type="object" string="Cancel"  class="oe_highlight"  states="confirmed"/>
							</group>
							-->
						</group>
						<group>
							
							<field name="order_category" attrs="{'readonly': [('flag_load_bom','!=',False)]}"/>
							<field name="pump_model_type" attrs="{'readonly': [('flag_load_bom','!=',False)]}"/>
							<field name="moc_construction_name"/>
							<field name="qty"  required="1" attrs="{'readonly': [('flag_load_bom','!=',False)]}"/>
							<field name="setting_height"  attrs="{'readonly': [('flag_load_bom','!=',False)], 'required': [('pump_model_type','=','vertical')]}"/>
							<field name="suction_spool"  attrs="{'readonly': [('flag_load_bom','!=',False)]}"/>
							<field name="shaft_sealing"  attrs="{'readonly': [('flag_load_bom','!=',False)], 'required': [('pump_model_type','=','vertical')]}"/>
							<field name="lubrication"  attrs="{'readonly': [('flag_load_bom','!=',False)], 'required': [('pump_model_type','=','vertical')]}"/>
							<field name="shaft_ext" invisible="1"/>
							<field name="trimming_dia"/>
							<field name="cc_drill"/>
							<field name="delivery_date" readonly="1" on_change="onchange_delivery_date(delivery_date)"/>
							<field name="mar_prime_cost" readonly="1" invisible="0"/>
							<field name="wo_prime_cost" readonly="1"/>
							<field name="flag_offer" invisible="1"/>
							<field name="schedule_status" invisible="1"/>
							<field name="order_summary" readonly="1"/>
							<field name="note" string="Remarks"/>
						</group>
					</group>
					<newline/>
					<group>
						<group>
							
							<field name="flag_load_bom" on_change="onchange_bom_details(flag_load_bom,pump_model_id, qty,moc_construction_id,order_category,flag_standard,rpm,setting_height,shaft_sealing,motor_power,bush_bearing,delivery_pipe_size,lubrication,unit_price,delivery_date,note,pump_model_type,flag_offer,flag_select_all)"
								/>
								
							<field name="flag_select_all" on_change="onchange_bom_details(flag_load_bom,pump_model_id, qty,moc_construction_id,order_category,flag_standard,rpm,setting_height,shaft_sealing,motor_power,bush_bearing,delivery_pipe_size,lubrication,unit_price,delivery_date,note,pump_model_type,flag_offer,flag_select_all)"/>
						</group>
						<group></group>
					</group>
					
					<newline/>
					<notebook>
						<page string="Foundry Items">
							<field name="line_ids" colspan="4" nolabel="1" context="{'order_category':order_category,'flag_standard':flag_standard}"  attrs="{'readonly': [('state','in',['confirmed','cancel'])]}">
								<tree string="BOM Details" editable="bottom" colors="red:mar_prime_cost &lt; wo_prime_cost;" attrs="{'invisible': [('bom_type','=','spare')]}">
								   <field name="order_category" invisible="1"/>								   
								   <field name="flag_applicable"/>
								   <field name="sequence_no" attrs="{'required': [('order_category','=','spare'),('flag_applicable','!=',False)],'readonly': [('order_category','!=','spare')]}"/>
								   <field name="pattern_id"/>
								   <field name="pattern_name" readonly="1"/>
								   <field name="off_name"/>
								   <field name="position_id" required="1" />
								   <field name="material_code"/>
								   <field name="weight" />
<!--
								   <field name="ci_weight" readonly="1"/>
								   <field name="nonferous_weight" readonly="1"/>
-->
								   
								   <field name="qty" required="1" attrs="{'readonly':[('entry_mode','=','auto'),('order_category','=','pump')]}"/>
								   <field name="total_weight" />
								   <field name="unit_price"/>
								   <field name="mar_prime_cost" readonly="1" invisible="0"/>
								   <field name="wo_prime_cost" readonly="1"/>
								   <field name="schedule_qty" invisible="1"/>
								   <field name="production_qty" invisible="1"/>
								   
								   <field name="flag_pattern_check"/>
								   <field name="moc_id" on_change="onchange_pattern_details(pattern_id,moc_id)" attrs="{'readonly':[('flag_standard','!=',True)],'required': [('flag_applicable','!=',False)]}"/>
								   <field name="add_spec" widget="char"/>
								   <field name="flag_standard" invisible="1"/>
								   <field name="entry_mode" invisible="1"/>
								   <field name="bom_type" invisible="1"/>
								   
								</tree>
							</field>
						</page>
						
						<page string="Machine Shop">
							<field name="line_ids_a" nolabel="1" context="{'order_category':order_category,'flag_standard':flag_standard}" attrs="{'readonly': [('state','in',['confirmed','cancel'])]}">
								<form string="Order Machine Shop Details Entry Form">
									<group colspan="4">
										<group>
											<field name="order_category" invisible="1"/>
											<field name="flag_applicable"/>
											<field name="ms_id"/>
											<field name="position_id" required="1"/>
											<field name="qty" on_change="onchange_raw_qty(ms_id,qty)" required="1" attrs="{'readonly':[('entry_mode','=','auto'),('order_category','=','pump')]}"/>
											<field name="indent_qty" invisible="1"/>
											<field name="mar_prime_cost" readonly="1" invisible="0"/>
											<field name="length"/>
											<field name="remarks" widget="char" string="Other Specification"/>
											<field name="entry_mode" invisible="1"/>
										</group>
										<group>
											<field name="sequence_no" attrs="{'required': [('order_category','=','spare'),('flag_applicable','!=',False)],'readonly': [('order_category','!=','spare')]}"/>
											<field name="name" readonly="1"/>
											<field name="off_name"/>
											<field name="material_code"/>
											<field name="unit_price"/>
											<field name="wo_prime_cost" readonly="1"/>
											<field name="moc_id" attrs="{'readonly':[('flag_standard','!=',True)],'required': [('flag_applicable','!=',False)]}"/>
											<field name="flag_standard" invisible="1"/>
											<field name="bom_type" invisible="1"/>
										</group>
									</group>
									<notebook>
										<page string="Raw Materials" >
											<field name="line_ids" colspan="4" nolabel="1">
												<tree string="Raw Materials Entry Tree" editable="top" create="false" delete="false">					
													<field name="product_id" required="1" readonly="1"/>
													<field name="uom" required="1" readonly="1"/>
													<field name="uom_conversation_factor" readonly="1"/>
													<field name="od" invisible="1"/>
													<field name="length" required="1" on_change="onchange_length(length,breadth,qty,temp_qty,uom_conversation_factor,product_id)"/>
													<field name="breadth" readonly="1"/>
													<field name="thickness" invisible="1"/>
													<field name="weight" invisible="1"/>
													<field name="temp_qty" required="1" readonly="1" on_change="onchange_weight(uom_conversation_factor,length,breadth,temp_qty,product_id)"/>
													<field name="qty" readonly="1"/>
													<field name="weight" readonly="1"/>
													<field name="remarks" readonly="0"/>
												</tree>
											</field>
										</page>
									</notebook>								
								</form>
								<tree string="Order Machine Shop Details Entry Tree" colors="red:mar_prime_cost &lt; wo_prime_cost;">
									<field name="order_category" invisible="1"/>
									<field name="flag_applicable"/>
									<field name="sequence_no" attrs="{'required': [('order_category','=','spare'),('flag_applicable','!=',False)],'readonly': [('order_category','!=','spare')]}"/>
									<field name="ms_id"/>		
									<field name="name" readonly="1"/>
									<field name="off_name"/>
									<field name="position_id" required="1"/>
									<field name="material_code"/>
									<field name="qty" required="1" on_change="onchange_qty(qty)"/>
									<field name="indent_qty" invisible="1"/>
									<field name="unit_price"/>
									<field name="mar_prime_cost" readonly="1" invisible="0"/>
									<field name="wo_prime_cost" readonly="1"/>
									
									<field name="length"/>
									
									<field name="moc_id" attrs="{'readonly':[('flag_standard','!=',True)],'required': [('flag_applicable','!=',False)]}"/>
									<field name="remarks" widget="char" string="Other Specification"/>
									<field name="flag_standard" invisible="1"/>
									<field name="entry_mode" invisible="1"/>
									<field name="bom_type" invisible="1"/>
									
								</tree>
							</field>
						</page>
						<page string="BOT">
							<field name="line_ids_b" nolabel="1" context="{'order_category':order_category,'flag_standard':flag_standard}" attrs="{'readonly': [('state','in',['confirmed','cancel'])]}">
								<tree string="Order BOT Details Entry Tree" editable="bottom" colors="red:mar_prime_cost &lt; wo_prime_cost;">	
									<field name="order_category" invisible="1"/>
									<field name="flag_applicable"/>
									<field name="sequence_no" attrs="{'required': [('order_category','=','spare'),('flag_applicable','!=',False)],'readonly': [('order_category','!=','spare')]}"/>
									<field name="bot_id" on_change="onchange_bot(bot_id)"/>	
									<field name="item_name" readonly="1"/>
									<field name="off_name"/>
									<field name="position_id" required="0"/>
									<field name="material_code"/>																			
									<field name="qty" required="1" attrs="{'readonly':[('entry_mode','=','auto'),('order_category','=','pump')]}"/>
									<field name="unit_price"/>
									<field name="mar_prime_cost" readonly="1" invisible="0"/>
									<field name="wo_prime_cost" readonly="1"/>
									<field name="flag_is_bearing" invisible="1"/>
									<field name="moc_id" attrs="{'readonly':[('flag_standard','!=',True)],'required': [('flag_applicable','!=',False)]}"/>
									<field name="brand_id" attrs="{'required': [('flag_is_bearing','!=',False)]}"/>
									<field name="remarks" widget="char" string="Other Specification"/>
									<field name="flag_standard" invisible="1"/>
									<field name="entry_mode" invisible="1"/>
									<field name="bom_type" invisible="1"/>
								</tree>
							</field>
						</page>
						
						<page string="Accessories">
							<field name="line_ids_d" nolabel="1" context="{'moc_const_id':moc_construction_id,'order_category':order_category}" attrs="{'readonly': [('state','in',['confirmed','cancel'])]}">
								<tree string="Accessories Entry Tree">
									<field name="access_id" required="1"/>
									<field name="off_name"/>
									<field name="moc_id" required="1"/>
									<field name="qty" required="1"/>
									<field name="wo_prime_cost" readonly="1"/>
									<field name="oth_spec"/>
								</tree>
								<form string="Accessories Entry Form">
									<group colspan="4">
										<group>
											<field name="access_id" required="1" attrs="{'readonly':[('load_access','=',True)]}"/>
											<field name="order_category" invisible="1"/>
											<field name="moc_const_id" required="1" attrs="{'readonly':[('load_access','=',True)]}" invisible="1"/>
											<field name="oth_spec"/>
											<field name="flag_standard" on_change="onchange_load_access(load_access,access_id,moc_const_id,qty,order_category,flag_standard)"/>
											<field name="mar_prime_cost" readonly="1" invisible="0"/>
										</group>
										<group>
											<field name="off_name"/>
											<field name="qty" required="1" attrs="{'readonly':[('load_access','=',True)]}"/>
											<field name="moc_id" invisible="1"/>
											<field name="wo_prime_cost" readonly="1"/>
											
										</group>
										<group>
										<group>
											<field name="load_access" on_change="onchange_load_access(load_access,access_id,moc_const_id,qty,order_category,flag_standard)"/>
										</group>
										<group>
										</group>
										</group>
									</group>
									<notebook>
										<page string = "Foundry Items">
											<field name="line_ids" nolabel="1" context="{'order_category':order_category,'flag_standard':flag_standard}">
												<tree string="Foundry Item Tree" editable="top" create="false" delete="false"
													colors="red:prime_cost &lt; wo_prime_cost;">
													<field name="is_applicable"/>
													<field name="order_category" invisible="1"/>
													<field name="flag_standard" invisible="1"/>
													<field name="position_id" required="1"/>
													<field name="pattern_id"/>
													<field name="pattern_name" readonly="1"/>
													<field name="off_name"/>
													<field name="material_code"/>
													<field name="moc_id" required="1" attrs="{'readonly':[('flag_standard','!=',True)]}"/>
													<field name="csd_no"/>
													<field name="qty" required="1" readonly="1"/>
													<field name="prime_cost" readonly="1" invisible="0"/>
													<field name="wo_prime_cost" readonly="1"/>
													<field name="entry_mode" invisible="1"/>
													<field name="remarks" string="Other Specification"/>
													<field name="load_bom" invisible="1"/>
												</tree>
											</field>								
										</page>
										<page string = "MS Items">
											<field name="line_ids_a" nolabel="1" context="{'order_category':order_category,'flag_standard':flag_standard}">
												<tree string="MS Item" editable="top" create="false" delete="false"
													colors="red:prime_cost &lt; wo_prime_cost;">
													<field name="is_applicable"/>
													<field name="order_category" invisible="1"/>
													<field name="flag_standard" invisible="1"/>
													<field name="position_id" required="1"/>
													<field name="ms_id"/>
													<field name="name" readonly="1"/>
													<field name="off_name"/>
													<field name="material_code"/>
													<field name="moc_id" required="1" attrs="{'readonly':[('flag_standard','!=',True)]}"/>
													<field name="csd_no"/>
													<field name="qty" required="1" on_change="onchange_qty(qty)" readonly="1"/>
													<field name="indent_qty" invisible="1"/>
													<field name="prime_cost" readonly="1" invisible="0"/>
													<field name="wo_prime_cost" readonly="1"/>
													<field name="entry_mode" invisible="1"/>
													<field name="remarks" string="Other Specification"/>
													<field name="load_bom" invisible="1"/>
												</tree>
											</field>								
										</page>
										<page string = "BOT Items">
											<field name="line_ids_b" nolabel="1" context="{'order_category':order_category,'flag_standard':flag_standard}">
												<tree string="BOT Item" editable="top" create="false" delete="false"
													colors="red:prime_cost &lt; wo_prime_cost;">
													<field name="is_applicable"/>
													<field name="order_category" invisible="1"/>
													<field name="position_id" required="0"/>
													<field name="flag_standard" invisible="1"/>
													<field name="ms_id"/>
													<field name="item_name" readonly="1"/>
													<field name="off_name"/>
													<field name="material_code"/>
													<field name="moc_id" required="1" attrs="{'readonly':[('flag_standard','!=',True)]}"/>
													<field name="csd_no" required="1"/>
													<field name="qty" required="1" readonly="1"/>
													<field name="prime_cost" readonly="1" invisible="0"/>
													<field name="wo_prime_cost" readonly="1"/>
													<field name="entry_mode" invisible="1"/>
													<field name="remarks" string="Other Specification"/>
													<field name="load_bom" invisible="1"/>
												</tree>
											</field>								
										</page>
									</notebook>
								</form>
							</field>								
						</page>
						
						<page string = "Spare BOM" attrs="{'invisible':[('order_category','!=','spare')]}">
							<field name="line_ids_e" context="{'moc_const_id':moc_construction_id}">
								<tree string="BOM Tree" >
									<field name="bom_id" required="1"/>
									<field name="qty" required="1"/>
									<field name="off_name"/>
								</tree>
								<form string="Spare Details Entry Form" create="false">
									<group colspan="4">
										<group>
											<field name="bom_id" required="1" on_change="onchange_spare_off_name(bom_id)"/>
											<field name="off_name"/>
											<field name="order_category" invisible="1"/>
											<field name="load_bom" on_change="onchange_spare_bom(bom_id,off_name,moc_const_id,qty,flag_standard)" attrs="{'invisible':[('bom_id','=',False)]}"/>
										</group>
										<group>
											<field name="qty" required="1" attrs="{'readonly':[('load_bom','=',True)]}"/>
											<field name="moc_const_id" invisible="1"/>
											<field name="flag_standard" on_change="onchange_spare_bom(bom_id,off_name,moc_const_id,qty,flag_standard)"/>
										</group>
									</group>
									
									<notebook>
										<page string="Foundry">
											<field name="line_ids" nolabel="1" context="{'order_category':order_category,'flag_standard':flag_standard}">
												<tree string="Foundry Item Tree" editable="top" create="false">
													<field name="is_applicable"/>
													<field name="order_category" invisible="1"/>
													<field name="flag_standard" invisible="1"/>
													<field name="sequence_no"/>
													<field name="position_id" required="1"/>
													<field name="pattern_id" attrs="{'readonly':[('load_bom','=',True)]}"/>
													<field name="pattern_name" required="1" attrs="{'readonly':[('load_bom','=',True)]}"/>
													<field name="off_name"/> 
													<field name="material_code"/>
													<field name="flag_pattern_check"/>
													<field name="moc_id" attrs="{'readonly':[('flag_standard','!=',True)],'required':[('is_applicable','=',True)]}" on_change="onchange_moc(moc_id,moc_name)"/>
													<field name="csd_no" attrs="{'readonly':[('load_bom','=',True)]}"/>
													<field name="qty" required="1" attrs="{'readonly':[('entry_mode','=','auto'),('order_category','=','pump')]}" />
													<field name="prime_cost" readonly="1"/>
													<field name="remarks" />
													<field name="load_bom" invisible="1"/>
													<field name="moc_name" invisible="1"/>
													<field name="moc_changed_flag" invisible="1"/>
													<field name="entry_mode" invisible="1"/>
												</tree>
											</field>
										</page>
										<page string="MS">
											<field name="line_ids_a" nolabel="1" context="{'order_category':order_category,'flag_standard':flag_standard}">
												<tree string="MS Item Tree" create="false">
													<field name="is_applicable"/>
													<field name="order_category" invisible="1"/>
													<field name="flag_standard" invisible="1"/>
													<field name="sequence_no"/>
													<field name="position_id" required="1"/>
													<field name="ms_id" required="1" attrs="{'readonly':[('load_bom','=',True)]}"/>
													<field name="name" attrs="{'readonly':[('load_bom','=',True)]}"/>
													<field name="off_name"/>
													<field name="material_code"/>
													<field name="moc_id" attrs="{'readonly':[('flag_standard','!=',True)],'required':[('is_applicable','=',True)]}" on_change="onchange_moc(moc_id,moc_name)"/>
													<field name="length"/>
													<field name="csd_no" attrs="{'readonly':[('load_bom','=',True)]}"/>
													<field name="qty" required="1" attrs="{'readonly':[('entry_mode','=','auto'),('order_category','=','pump')]}"/>
													<field name="prime_cost" readonly="1"/>
													<field name="remarks" />
													<field name="load_bom" invisible="1"/>
													<field name="moc_name" invisible="1"/>
													<field name="moc_changed_flag" invisible="1"/>
													<field name="entry_mode" invisible="1"/>
												</tree>												
												<form string="Spare Machine Shop Details Entry Form">
													<group colspan="4">
														<group>
															<field name="is_applicable"/>
															<field name="order_category" invisible="1"/>
															<field name="flag_standard" invisible="1"/>
															<field name="ms_id" required="1" attrs="{'readonly':[('load_bom','=',True)]}"/>
															<field name="off_name"/>
															<field name="moc_id" attrs="{'readonly':[('flag_standard','!=',True)],'required':[('is_applicable','=',True)]}" on_change="onchange_moc(moc_id,moc_name)"/>
															<field name="csd_no" attrs="{'readonly':[('load_bom','=',True)]}"/>
															<field name="prime_cost" readonly="1"/>
															<field name="load_bom" invisible="1"/>
															<field name="moc_name" invisible="1"/>
															<field name="moc_changed_flag" invisible="1"/>
														</group>
														<group>
															<field name="sequence_no"/>
															<field name="position_id" required="1" attrs="{'readonly':[('load_bom','=',True)]}"/>
															<field name="name" attrs="{'readonly':[('load_bom','=',True)]}"/>
															<field name="material_code"/>
															<field name="length"/>
															<field name="entry_mode" invisible="1"/>
															<field name="qty" required="1" attrs="{'readonly':[('entry_mode','=','auto'),('order_category','=','pump')]}" on_change="onchange_raw_qty(ms_id,qty)"/>
															<field name="remarks" attrs="{'readonly':[('load_bom','=',True)]}"/>
														</group>
													</group>
													<notebook>
														<page string="Raw Materials" >
															<field name="line_ids" colspan="4" nolabel="1">
																<tree string="Spare Raw Materials Entry Tree" editable="top"  create="false" delete="false">					
																	<field name="product_id" required="1" readonly="1"/>
																	<field name="uom" required="1" readonly="1"/>
																	<field name="uom_conversation_factor" readonly="1"/>
																	<field name="od" invisible="1"/>
																	<field name="length" required="1" on_change="onchange_length(length,breadth,qty,temp_qty,uom_conversation_factor,product_id)"/>
																	<field name="breadth" readonly="1"/>
																	<field name="thickness" invisible="1"/>
																	<field name="weight" invisible="1"/>
																	<field name="temp_qty" required="1" readonly="1" on_change="onchange_weight(uom_conversation_factor,length,breadth,temp_qty,product_id)"/>
																	<field name="qty" readonly="1"/>
																	<field name="weight" readonly="1"/>
																	<field name="remarks" readonly="1"/>
																</tree>
															</field>
														</page>
													</notebook>	
												</form>
													
														
											</field>
										</page>
										<page string="BOT">
											<field name="line_ids_b" nolabel="1" context="{'order_category':order_category,'flag_standard':flag_standard}">
												<tree string="BOT Item Tree" editable="top" create="false">
													<field name="is_applicable"/>
													<field name="order_category" invisible="1"/>
													<field name="flag_standard" invisible="1"/>
													<field name="sequence_no"/>
													<field name="position_id" required="0"/>
													<field name="ms_id" required="1" attrs="{'readonly':[('load_bom','=',True)]}"/>
													<field name="item_name" attrs="{'readonly':[('load_bom','=',True)]}"/>
													<field name="off_name"/>
													<field name="material_code"/>
													<field name="moc_id" attrs="{'readonly':[('flag_standard','!=',True)],'required':[('is_applicable','=',True)]}" on_change="onchange_moc(moc_id,moc_name)"/>
													<field name="brand_id" attrs="{'required': [('flag_is_bearing','=',True),('is_applicable','=',True)]}"/>
													<field name="qty" required="1" attrs="{'readonly':[('entry_mode','=','auto'),('order_category','=','pump')]}"/>
													<field name="prime_cost" readonly="1"/>
													<field name="remarks"/>
													<field name="load_bom" invisible="1"/>
													<field name="flag_is_bearing" invisible="1"/>
													<field name="moc_name" invisible="1"/>
													<field name="moc_changed_flag" invisible="1"/>
													<field name="entry_mode" invisible="1"/>
												</tree>
											</field>
										</page>
									</notebook>
								</form>
							</field>
						</page>
						

						
					</notebook>
					
				</form>
			</field>
		</record>
		
	<!-- Child Class Form View End -->
		
		
	<!-- Search View Start -->

		<record id="t_search_v_work_order" model="ir.ui.view">
            <field name="name">Work Order Entry Search</field>
            <field name="model">kg.work.order</field>
            <field name="arch" type="xml">
                <search string="Work Order Entry Search">
					<field name="name" string="Transaction"  filter_domain="[('name','ilike',self)]" />
					<filter icon="terp-check" name="draft" string="Draft" domain="[('state','=','draft')]"/>
					<filter icon="terp-check" name="mkt_approved" string="MKT Approved" domain="[('state','=','mkt_approved')]"/>
					<filter icon="terp-check" name="design_approved" string="Design Approved" domain="[('state','=','design_approved')]"/>
					<filter icon="terp-check" name="confirmed" string="MD Approved" domain="[('state','=','confirmed')]"/>					
					<filter icon="terp-check" name="cancel" string="Cancelled" domain="[('state','=','cancel')]"/>					
					<separator/>
                    <group expand="0" string="Group By...">
						<filter string="Division" icon="terp-gtk-select-all" domain="[]" context="{'group_by':'division_id'}"/>
						<filter string="Priority" icon="terp-gtk-select-all" domain="[]" context="{'group_by':'order_priority'}"/>
                        <filter string="Status" icon="terp-gtk-select-all" domain="[]" context="{'group_by':'state'}"/>
					</group>
                </search>
			</field>
		</record>
		
	<!-- Search View End -->
	
	<!-- Menu Action Start for Work Order -->
		
		<record id="tma_work_order" model="ir.actions.act_window">
			<field name="name">Work Order</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">kg.work.order</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
			<field name="context">{}</field>
			<field name="view_id" ref="t_tree_v_work_order"/>
			<field name="search_view_id" ref="t_search_v_work_order"/>
			<field name="domain">[('state','=','mkt_approved')]</field>	
		</record>
		
		
		<record id="tma_work_order_app" model="ir.actions.act_window">
			<field name="name">Approved Work Order</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">kg.work.order</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
			<field name="context">{}</field>
			<field name="view_id" ref="t_tree_app_v_work_order"/>
			<field name="search_view_id" ref="t_search_v_work_order"/>
			<field name="domain">[('state','=','confirmed')]</field>
			
		</record>
		
	<!-- Menu Action End for Work Order -->
	
	<!-- Menu Action Start for CRM Work Order -->
		
		<record id="tma_crm_work_order" model="ir.actions.act_window">
			<field name="name">Work Order</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">kg.work.order</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
			<field name="context">{}</field>
			<field name="view_id" ref="t_tree_v_work_order"/>
			<field name="search_view_id" ref="t_search_v_work_order"/>
		<field name="domain">[('state','=','draft')]</field>
			
		</record>
		
		<record id="tma_work_md_order_mgmt" model="ir.actions.act_window">
			<field name="name">WF MD Approval</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">kg.work.order</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
			<field name="context">{}</field>
			<field name="view_id" ref="t_tree_v_work_order"/>
			<field name="search_view_id" ref="t_search_v_work_order"/>
			<field name="domain">[('state','=','design_approved')]</field>
			
		</record>
		
	<!-- Menu Action End for Work Order -->
	
	<!-- Menu Action Start for Work Order Special Approval-->
		
		<record id="tma_wo_special_approval" model="ir.actions.act_window">
			<field name="name">WO Special Approval</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">kg.work.order</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
			<field name="context">{}</field>
			<field name="view_id" ref="t_tree_v_work_order"/>
			<field name="search_view_id" ref="t_search_v_work_order"/>
			<field name="domain">[('wo_spc_app_flag','=','t'),('state','=','design_approved')]</field>
		
		</record>
		
	<!-- Menu Action End for Work Order -->
	
	<!-- Audit Log Xml Data Start -->
		
        <record id="audit_work_order" model="audittrail.rule">
            <field name="name">Audit Log Work Order</field>
            <field name="object_id" eval="ref('kg_work_order.model_kg_work_order')"/>       
            <field name="state">subscribed</field>              
        </record>
		
        <record id="audit_work_order_line" model="audittrail.rule">
            <field name="name">Audit Log Work Order Line</field>
            <field name="object_id" eval="ref('kg_work_order.model_ch_work_order_details')"/>       
            <field name="state">subscribed</field>              
        </record>
   
        <record id="audit_workorder_bom" model="audittrail.rule">
            <field name="name">Audit Log Work Order BOM Details</field>
            <field name="object_id" eval="ref('kg_work_order.model_ch_order_bom_details')"/>       
            <field name="state">subscribed</field>              
        </record>
        
        <record id="audit_workorder_ms" model="audittrail.rule">
            <field name="name">Audit Log Work Order Machine Shop Details</field>
            <field name="object_id" eval="ref('kg_work_order.model_ch_order_machineshop_details')"/>       
            <field name="state">subscribed</field>              
        </record>
        
        <record id="audit_workorder_bot" model="audittrail.rule">
            <field name="name">Audit Log Work Order BOT Details</field>
            <field name="object_id" eval="ref('kg_work_order.model_ch_order_bot_details')"/>       
            <field name="state">subscribed</field>              
        </record>
        
     
     
    <!-- Sequence Number Setting Starts Here -->
	
	<record forcecreate="1" id="seq_type_work_order" model="ir.sequence.type">	
		<field name="name">KG Work Order</field>
		<field name="code">kg.work.order</field>
	</record>

	<record forcecreate="1" id="seq_work_order" model="ir.sequence">
	  <field name="name">KG Work Order</field>
	  <field name="code">kg.work.order</field>
	  <field name="padding" eval="3"/>
	  <field name="prefix">WO/%(year)s /%(month)s/</field>
	  <field name="reset_sequence">fiscal_reset</field>
	</record>
	
	<!-- Sequence Number Setting Ends Here -->
        
	<!-- Un scheduled Work Order Items Tree View Start-->
    
		<record id="t_tree_v_unscheduled_wo_list" model="ir.ui.view">
			<field name="name">Un Scheduled Work Order Items Tree</field>
			<field name="model">ch.work.order.details</field>
			<field eval="8" name="priority"/>
			<field name="arch" type="xml">
				<tree toolbar="True" string="Un Scheduled Work Order Items Tree" create="false" delete="false">					
					<field name="order_no" string="WO.No."/>
					<field name="order_date" string="WO.Date"/>
					<field name="pump_model_id"/>
					<field name="order_priority"/>
					<field name="order_category"/>
					<field name="delivery_date"/>
				</tree>
			</field>
		</record>
		
	 <!-- Un scheduled Work Order Items Tree View End -->
	
	<!-- Menu Action Start for Work Order -->
		
		<record id="tma_unscheduled_wo_list" model="ir.actions.act_window">
			<field name="name">Un-Schedule Work Order</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">ch.work.order.details</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
			<field name="context">{}</field>
			<field name="view_id" ref="t_tree_v_unscheduled_wo_list"/>
<!--
			<field name="search_view_id" ref="t_search_v_work_order"/>
-->
			<field name="domain">[('schedule_status','in',('allow','not_allow')),('state','=','confirmed')]</field>
		</record>
		
	<!-- Menu Action End for Work Order -->
	
	
	
	<!-- UN-schedule Foundry Item Tree View Start-->
    
		<record id="t_tree_v_unscheduled_bom_list" model="ir.ui.view">
			<field name="name">UN-Schedule Foundry Item Tree</field>
			<field name="model">ch.order.bom.details</field>
			<field eval="8" name="priority"/>
			<field name="arch" type="xml">
				<tree toolbar="True" string="UN-Schedule Foundry Items Tree" create="false" delete="false">					
					<field name="header_id" string="Order No."/>
					<field name="pump_model_id"/>
					<field name="order_category"/>
					<field name="order_priority"/>
					<field name="pattern_id"/>
					<field name="flag_applicable" invisible="1"/>					
					<field name="order_id" invisible="1"/>
					<field name="pattern_name"/>
					<field name="moc_id"/>
					<field name="qty"/>
					<field name="weight"/>					
					<field name="total_weight"/>				
					<field name="rate_kg"/>
					<field name="flag_pattern_check"/>				
					<field name="add_spec"/>
				</tree>
			</field>
		</record>
		
	 <!-- UN-schedule Foundry Item Tree View End -->
	 
	 
	 <!-- UN-schedule Foundry Item Search View Start -->

		<record id="t_search_v_unscheduled_bom" model="ir.ui.view">
            <field name="name">UN-Schedule Foundry Item Entry Search</field>
            <field name="model">ch.order.bom.details</field>
            <field name="arch" type="xml">
                <search string="UN-Schedule Foundry Item Entry Search">	
					<field name="header_id" string="Work Order No."  filter_domain="[('header_id','ilike',self)]" />
					<field name="pattern_id" string="Pattern Number"  filter_domain="[('pattern_id','ilike',self)]" />					
					<field name="moc_id" string="MOC"  filter_domain="[('moc_id','ilike',self)]" />							
					<separator/>
                    <group expand="0" string="Group By...">
						<filter string="Order No." icon="terp-gtk-select-all" domain="[]" context="{'group_by':'header_id'}"/>						
						<filter string="Pattern No." icon="terp-gtk-select-all" domain="[]" context="{'group_by':'pattern_id'}"/>
						<filter string="Pattern Name." icon="terp-gtk-select-all" domain="[]" context="{'group_by':'pattern_name'}"/>
						<filter string="MOC" icon="terp-gtk-select-all" domain="[]" context="{'group_by':'moc_id'}"/>
						 <filter name="group_header_id" string="Order No." icon="terp-partner" context="{'group_by':'header_id'}"/>					
					</group>
                </search>
			</field>
		</record>
		
	<!-- UN-schedule Foundry Item Search View End -->		
	 
	 <!-- UN-schedule Foundry Item menu -->	

	<record id="tma_foundry_item_unscheduled_bom" model="ir.actions.act_window">
		<field name="name">UN-Schedule Foundry Item</field>
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">ch.order.bom.details</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree</field>
		<field name="domain">[('header_id.schedule_status','=','allow'),('flag_applicable','=','t')]</field>		
		<field name="search_view_id" ref="t_search_v_unscheduled_bom"/>
		<field name="context">{'search_default_group_header_id': 1}</field>
	</record>

	<record id="tma_foundry_item_unscheduled_bom_tree_view" model="ir.actions.act_window.view">
		<field eval="1" name="sequence"/>
		<field name="view_mode">tree</field>
		<field name="view_id" ref="t_tree_v_unscheduled_bom_list"/>
		<field name="act_window_id" ref="tma_foundry_item_unscheduled_bom"/>
	</record>
	
	
	<!-- UN-schedule Foundry Item menu END -->	
		
	
	<!-- Menu Item Start -->
	
		<!-- Work Order -->
		<menuitem  action="tma_work_order" name="Work order Design" id="tam_work_order" parent="kg_stock_inward.tpm_planning_transactions" sequence="3"/>
		<menuitem  action="tma_crm_work_order" name="Work order Marketing" id="tam_crm_work_order" parent="kg_menus.cpm_crm_enquiry_menu" sequence="3"/>
		<menuitem  action="tma_wo_special_approval" id="tam_wo_special_approval" parent="kg_stock_inward.tpm_planning_transactions" sequence="3"/>
		<menuitem  action="tma_work_order_app" id="tam_wo_approval" parent="kg_stock_inward.tpm_planning_transactions" sequence="3"/>
		<menuitem  action="tma_work_md_order_mgmt" id="tam_wo_md_approval" parent="kg_stock_inward.tpm_planning_transactions" sequence="3"/>

		<!-- Un Scheduled Work Order -->
		<menuitem  action="tma_unscheduled_wo_list" id="tam_unscheduled_work_order" parent="kg_stock_inward.tpm_planning_transactions" sequence="4"/>
		<menuitem  action="tma_foundry_item_unscheduled_bom" id="tam_unscheduled_bom_work_order" parent="kg_stock_inward.tpm_planning_transactions" sequence="4"/>
	
	<!-- Menu Item End -->
	
	
	</data>
</openerp>
