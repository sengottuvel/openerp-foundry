<?xml version="1.0" encoding="utf-8"?>
<openerp>
	<data>
	
	<!-- Form View Start -->
		
		<record id="t_form_v_crm_offer" model="ir.ui.view">
			<field name="name">Offer Entry Form</field>
			<field name="model">kg.crm.offer</field>
			<field name="arch" type="xml">
				<form string="CRM Offer" version="7.0" create="false" delete="false">
					<header>
						<button name="entry_confirm" type="object" string="WFMT Approve" states="draft" class="oe_highlight"/>
						<button name="entry_design_check" type="object" string="WFD Check" states="confirmed" class="oe_highlight"/>
						<button name="entry_design_verify" type="object" string="WFD Verify" states="design_checked" class="oe_highlight"/>
						<button name="entry_design_approve" type="object" string="WFD Approve" states="design_verified" class="oe_highlight"/>
						<button name="entry_reject" type="object" string="Reject" states="confirmed,design_checked,design_verified" class="oe_highlight"/>
						<button name="wo_creation" type="object" string="Create WO" attrs="{'invisible':['|',('state','!=','moved_to_offer'),('purpose','=','in_development')]}" class="oe_highlight"/>
<!--
						<button name="entry_revision" type="object" string="Create Revision" attrs="{'invisible':['|',('state','!=','wo_created'),('is_zero_offer','!=',True)]}" class="oe_highlight"/>
-->
						<button name="entry_revision" type="object" string="Create Revision" states="moved_to_offer,wo_created" class="oe_highlight"/>
						<button name="entry_reset" type="object" string="Reset" states="revised" class="oe_highlight"/>
						<button name="offer_copy" type="object"  string="Offer Copy" class="oe_highlight"/>
						<button name="spare_regular_copy" type="object"  string="Spare Regular Copy" class="oe_highlight"/>
						<button name="spare_budgetary_copy" type="object"  string="Spare Budgetary Copy" class="oe_highlight"/>
						<button name="term_copy" type="object" states="moved_to_offer,wo_created" string="Terms Copy" class="oe_highlight"/>
						<button name="send_to_dms" type="object" string="DMS" class="oe_highlight"/>
						
					</header>
						<group>
							<group>
								<field name="name" required="1"/>
								<field name="offer_date" readonly="1"/>
								<field name="customer_id" required="1" readonly="1"/>
								<field name="dealer_id" readonly="1"/>
								<field name="prj_name" readonly="1"/>
								<field name="ref_mode" readonly="1"/>
								<field name="customer_po_no"/>
								<field name="cust_po_date" options="{'datepicker':{'minDate': null,'maxDate': 0,}}"/>
								<field name="cpo_del"/>
								<field name="dealer_po_no"/>
								<field name="deal_po_date" options="{'datepicker':{'minDate': -20,'maxDate': 0,}}"/>
								<field name="sam_del"/>
								<field name="division_id" readonly="1"/>
								<field name="road_permit"/>
								<field name="inspection"/>
								<field name="revision" readonly="1"/>
								<field name="note"/>
								<field name="is_zero_offer" attrs="{'readonly':[('state','=','wo_created')]}"/>
								<field name="purpose" readonly="1"/>
								<field name="reject_remarks"/>
								<field name="revision_remarks" attrs="{'invisible':[('revision','=',0)],'readonly':[('state','=','revised')],'required':[('revision','!=',0)]}"/>
								<field name="wo_flag" invisible="1"/>
<!--
								<field name="division_code" invisible="1"/>
-->
							</group>											
							<group>
								<field name="enquiry_id" readonly="1" invisible="1"/>
								<field name="enquiry_no" readonly="1"/>
								<field name="enquiry_date" readonly="1"/>
								<field name="due_date" options="{'datepicker':{'minDate': 0,'maxDate': null,}}"/>
								<field name="del_date" options="{'datepicker':{'minDate': 0,'maxDate': null,}}"/>
								<field name="segment" readonly="1"/>
								<field name="dom_freight" attrs="{'invisible':[('segment','!=','dom')],'required':[('segment','=','dom')]}"/>
								<field name="freight" attrs="{'invisible':[('segment','!=','exp')],'required':[('segment','=','exp')]}"/>
								<field name="del_term" attrs="{'invisible':[('segment','!=','exp')]}"/>
								<field name="mode_of_dispatch" attrs="{'invisible':[('segment','!=','exp')]}"/>
								<field name="flag_data_bank" attrs="{'invisible':['|','|',('zone','!=',False),('segment','!=','dom'),('division_id','!=',36)]}"/>
								<field name="location" required="0" invisible="1"/>
								<field name="excise_duty"/>
								<field name="drawing_approval"/>
								<field name="l_d_clause"/>
								<field name="off_status"/>
								<field name="reminder_date" attrs="{'invisible': [('off_status','!=','to_be_follow')]}" options="{'datepicker':{'minDate': 0,'maxDate': null,}}"/>
								<field name="state" style="width: 30%%" class="att_state_change" readonly="1"/>
								<field name="zone" invisible="1"/>
								<field name="rep_data" readonly="1" width="100" filename="offer_copy"/>
								<field name="term_data" readonly="1" width="100" filename="term_copy"/>
								<field name="spare_reg_data" readonly="1" width="100" filename="spare_reg_copy"/>
								<field name="spare_bud_data" readonly="1" width="100" filename="spare_bud_copy"/>
							</group>
							<group string="Breakups">
								<field name="offer_prime_cost_tot"/>
								<field name="offer_sam_ratio_tot"/>
								<field name="sam_ratio_tot"/>
								<field name="offer_dealer_discount_tot"/>
								<field name="offer_spl_discount_tot"/>
							</group>
							<group>
								<field name="offer_p_f_tot"/>
								<field name="offer_insurance_tot"/>
								<field name="offer_freight_tot"/>
								<field name="offer_tax_tot"/>
								<field name="offer_customer_discount_tot"/>
								<field name="offer_net_amount"/>
								<field name="component_net_amount" invisible="1"/>
								<field name="supervision_amount" invisible="1"/>
							</group>
						</group>
						<group string="Applicable For">
							<group>
								<field name="pump_per_flag"/>
								<field name="access_per_flag"/>
							</group>
							<group>
								<field name="spare_per_flag"/>
								<field name="super_per_flag" invisible="1"/>
							</group>
							<group string="Forward">
								<field name="o_sam_ratio" attrs="{'readonly':[('state','not',('draft','confirmed','design_checked','design_verified')),('is_zero_offer','!=',False)]}"/>
								<field name="o_dealer_discount" on_change="onchange_delaer_discount(o_dealer_discount)" attrs="{'readonly':[('state','not',('draft','confirmed','design_checked','design_verified')),('is_zero_offer','!=',False)]}"/>
								<field name="o_special_discount" on_change="onchange_special_discount(o_special_discount)" attrs="{'readonly':[('state','not',('draft','confirmed','design_checked','design_verified')),('is_zero_offer','!=',False)]}"/>
								<label for="o_p_f" string="P&amp;F" class="append_percentage"/>
								<div>
									<div class="address_format">
										<field name="o_p_f" style="width: 20%%" on_change="onchange_p_f(o_p_f,o_p_f_in_ex)" attrs="{'readonly':[('state','not',('draft','confirmed','design_checked','design_verified')),('is_zero_offer','!=',False)]}"/>
										<field name="o_p_f_in_ex" style="width: 18%%" on_change="onchange_p_f(o_p_f,o_p_f_in_ex)" attrs="{'required': [('o_p_f','>',0)]}" />
									</div>
								</div>
							</group>
							<group>
								<label for="o_freight" string="Freight" class="append_percentage"/>
								<div>
									<div class="address_format">
										<field name="o_freight" style="width: 21%%" on_change="onchange_freight(o_freight,o_freight_in_ex)" attrs="{'readonly':[('state','not',('draft','confirmed','design_checked','design_verified')),('is_zero_offer','!=',False)]}"/>
										<field name="o_freight_in_ex" style="width: 19%%" on_change="onchange_freight(o_freight,o_freight_in_ex)" attrs="{'required': [('o_freight','>',0)]}"/>
									</div>
								</div>
								<label for="o_insurance" string="Insurance" class="append_percentage"/>
								<div>
									<div class="address_format">
										<field name="o_insurance" style="width: 21%%" on_change="onchange_insurance(o_insurance,o_insurance_in_ex)" attrs="{'readonly':[('state','not',('draft','confirmed','design_checked','design_verified')),('is_zero_offer','!=',False)]}"/>
										<field name="o_insurance_in_ex" style="width: 19%%" on_change="onchange_insurance(o_insurance,o_insurance_in_ex)" attrs="{'required': [('o_insurance','>',0)]}"/>
									</div>
								</div>
								<field name="o_customer_discount" attrs="{'readonly':[('state','not',('draft','confirmed','design_checked','design_verified')),('is_zero_offer','!=',False)]}"/>
								<field name="o_agent_com" invisible="1"/>
							</group>
							<group string="Reverse">
								<field name="r_o_dealer_discount" attrs="{'readonly':[('state','not',('draft','confirmed','design_checked','design_verified')),('is_zero_offer','!=',False)]}"/>
								<field name="r_o_special_discount" attrs="{'readonly':[('state','not',('draft','confirmed','design_checked','design_verified')),('is_zero_offer','!=',False)]}"	/>
								<label for="r_o_p_f" string="P&amp;F" class="append_percentage"/>
								<div>
									<div class="address_format">
										<field name="r_o_p_f" style="width: 20%%" attrs="{'readonly':[('state','not',('draft','confirmed','design_checked','design_verified')),('is_zero_offer','!=',False)]}"/>
										<field name="r_o_p_f_in_ex" style="width: 18%%" attrs="{'required': [('r_o_p_f','>',0)]}"/>
									</div>
								</div>
							</group>
							<group>
								<label for="r_o_freight" string="Freight" class="append_percentage"/>
								<div>
									<div class="address_format">
										<field name="r_o_freight" style="width: 21%%" attrs="{'readonly':[('state','not',('draft','confirmed','design_checked','design_verified')),('is_zero_offer','!=',False)]}"/>
										<field name="r_o_freight_in_ex" style="width: 19%%" attrs="{'required': [('r_o_freight','>',0)]}"/>
									</div>
								</div>
								<label for="r_o_insurance" string="Insurance" class="append_percentage"/>
								<div>
									<div class="address_format">
										<field name="r_o_insurance" style="width: 21%%" attrs="{'readonly':[('state','not',('draft','confirmed','design_checked','design_verified')),('is_zero_offer','!=',False)]}"/>
										<field name="r_o_insurance_in_ex" style="width: 19%%" attrs="{'required': [('r_o_insurance','>',0)]}"/>
									</div>
								</div>
								<label for="r_o_customer_discount" string="Customer Discount" class="append_percentage"/>
								<div>
									<div class="address_format">
										<field name="r_o_customer_discount" style="width: 21%%" attrs="{'readonly':[('state','not',('draft','confirmed','design_checked','design_verified')),('is_zero_offer','!=',False)]}"/>
										<field name="r_o_cust_in_ex" style="width: 19%%" attrs="{'required': [('r_o_customer_discount','>',0)]}" invisible="0"/>
									</div>
								</div>
							</group>
							<button name="update_percentage" type="object" string="Update" states="draft,moved_to_offer" class="oe_highlight"/>
						</group>
						<group string="Pump Offer">
							<field name="line_pump_ids" colspan="4" nolabel="1" attrs="{'readonly':[('state','not',('draft','confirmed','design_checked','design_verified')),('is_zero_offer','!=',False)]}">
								<tree string="Pump History" create="false" delete="false">
									<field name="pumpseries_id" required="1"/>
									<field name="pump_id" required="1"/>
									<field name="moc_const_id"/>
									<field name="qty" sum="qty"/>
									<field name="per_pump_prime_cost" sum="per_pump_prime_cost"/>
									<field name="additional_cost" invisible="1"/>
									<field name="prime_cost" sum="prime_cost"/>
									
									<field name="r_sam_ratio"/>
									<field name="r_works_value" sum="r_works_value"/>
									<field name="r_dealer_discount"/>
									<field name="r_special_discount"/>
									<field name="r_p_f"/>
									<field name="r_freight"/>
									<field name="r_insurance"/>
									<field name="r_customer_discount"/>
									<field name="r_net_amt_tot" sum="r_net_amt_tot"/>
									<field name="gst"/>
									<field name="r_net_amount" sum="net_amount"/>
								</tree>
							</field>
						</group>
						<group string="Spare Offer">
							<field name="line_spare_ids" colspan="4" nolabel="1" attrs="{'readonly':[('state','not',('draft','confirmed','design_checked','design_verified')),('is_zero_offer','!=',False)]}">
								<tree string="Spare History" create="false" delete="false">
									<field name="pumpseries_id" required="1"/>
									<field name="pump_id" required="1"/>
									<field name="item_code" required="1"/>
									<field name="item_name" required="1"/>
									<field name="off_name"/>
									<field name="moc_id"/>
									<field name="moc_changed_flag" readonly="1" invisible="1"/>
									<field name="moc_const_id" readonly="1"/>
									<field name="qty" sum="qty"/>
									<field name="prime_cost" sum="prime_cost"/>
									
									<field name="r_sam_ratio"/>
									<field name="r_works_value" sum="r_works_value"/>
									<field name="r_dealer_discount"/>
									<field name="r_special_discount"/>
									<field name="r_p_f"/>
									<field name="r_freight"/>
									<field name="r_insurance"/>
									<field name="r_customer_discount"/>
									<field name="r_net_amt_tot" sum="r_net_amt_tot"/>
									<field name="gst"/>
									<field name="r_net_amount" sum="net_amount"/>
									
								</tree>
							</field>
						</group>
						<group string="Accessories Offer">
							<field name="line_accessories_ids" colspan="4" nolabel="1" attrs="{'readonly':[('state','not',('draft','confirmed','design_checked','design_verified')),('is_zero_offer','!=',False)]}">
								<tree string="Accessories History" create="false" delete="false">
									<field name="access_id" required="1" readonly="1"/>
									<field name="off_name" readonly="1"/>
									<field name="pump_id" required="1" readonly="1"/>
									<field name="moc_id" required="1" readonly="1" invisible="1"/>
									<field name="moc_changed_flag" readonly="1" invisible="1"/>
									<field name="qty" sum="qty"/>
									<field name="per_access_prime_cost" sum="per_access_prime_cost" readonly="1"/>
									<field name="additional_cost" invisible="1"/>
									<field name="prime_cost" sum="prime_cost" readonly="1"/>
																		
									<field name="r_sam_ratio"/>
									<field name="r_works_value" sum="r_works_value"/>
									<field name="r_dealer_discount"/>
									<field name="r_special_discount"/>
									<field name="r_p_f"/>
									<field name="r_freight"/>
									<field name="r_insurance"/>
									<field name="r_customer_discount"/>
									<field name="r_net_amt_tot" sum="r_net_amt_tot"/>
									<field name="gst"/>
									<field name="r_net_amount" sum="net_amount"/>
									
								</tree>
							</field>
						</group>
						
						<group string="Component Offer" invisible="1">
							<field name="line_component_ids" colspan="4" nolabel="1" attrs="{'readonly':[('state','not',('draft','confirmed','design_checked','design_verified')),('is_zero_offer','!=',False)]}">
								<tree string="Component History" create="false" delete="false">
									<field name="item_code" required="1"/>
									<field name="item_name" required="1"/>
									<field name="off_name"/>
									<field name="moc_id"/>
									<field name="moc_changed_flag" readonly="1" invisible="1"/>
									<field name="moc_const_id" readonly="1"/>
									<field name="qty" sum="qty"/>
									<field name="additional_cost" invisible="1"/>
									<field name="prime_cost" sum="prime_cost"/>
									<field name="sam_ratio"/>
									<field name="sam_ratio_tot" string="Works Value"/>
									<field name="dealer_discount"/>
									<field name="special_discount"/>
									<field name="p_f"/>
									<field name="freight"/>
									<field name="insurance"/>
									<field name="customer_discount"/>
									<field name="agent_com"/>
									<field name="gst"/>
									<field name="supervision_amount" sum="supervision_amount"/>
									<field name="tot_price" sum="total_price"/>
									<field name="net_amount" sum="net_amount"/>
								</tree>
							</field>
						</group>
						<group string="Supervision Charge" invisible="1">
							<field name="line_supervision_ids" colspan="4" nolabel="1" attrs="{'readonly':[('state','not',('draft','confirmed','design_checked','design_verified')),('is_zero_offer','!=',False)]}">
								<tree string="Supervision History" editable="bottom">
									<field name="prime_cost" sum="prime_cost" readonly="1"/>
									<field name="sam_ratio"/>
									<field name="dealer_discount"/>
									<field name="special_discount"/>
									<field name="p_f"/>
									<field name="freight"/>
									<field name="insurance"/>
									<field name="customer_discount"/>
									<field name="agent_com"/>
									<field name="tax"/>
									<field name="net_amount" sum="net_amount"/>
								</tree>
							</field>
						</group>
						<group>
							<group>
								<field name="load_term" on_change="onchange_term(load_term,line_term_ids)"/>
							</group>
							<group>
							</group>
						</group>
						<group string="Terms">
							<field name="line_term_ids" colspan="4" nolabel="1" attrs="{'readonly':[('state','not in',('draft','confirmed','design_checked','design_verified'))],'readonly':[('load_term','=',False)]}">
								<tree string="Term History" editable="top">
									<field name="term_id" required="1" on_change="onchange_term(term_id)"/>
									<field name="term" required="1"/>
									<field name="remark"/>
								</tree>
							</field>
						</group>
						<group string="Remarks" attrs="{'invisible': [('off_status','not in',('on_hold','closed'))],'required': [('enq_status','in',('on_hold','closed'))]}">
							<field name="line_remark_ids" colspan="4" nolabel="1" widget="one2many_selectable">
								<tree string="Term History" editable="top">
									<field name="remarks" class="aplhanum_expect" required="1"/>
								</tree>
							</field>
						</group>
						<group string="Attachments">
							<field name="line_attach_ids" colspan="4" nolabel="1" widget="one2many_selectable">
								<tree string="Attachments">
									<field name="description" attrs="{'required':[('file','!=',False)]}"/>
									<field name="filename" readonly="1" invisible="1"/>
									<field name="file" filename="filename"/>
								</tree>
								<form string="Attachments" >
									<group>
										<group>
											<field name="filename" readonly="1" invisible="1"/>
											<field name="file" filename="filename"/>							
										</group>
										<group>
											<field name="description" attrs="{'required':[('file','!=',False)]}"/>
										</group>
									</group>
								</form>
							</field>
						</group>
						<group string="Annexure 1">
							<field name="annexure_1" nolabel="1" colspan="4"/>
						</group>
						<notebook>
							<page string="Entry Info">
								<group>
									<group>
										<field name="company_id"/>
									</group>
									<group>
										<field name="active"/>
									</group>
									<group>
										<field name="user_id"/>
										<field name="reject_user_id" attrs="{'invisible':[('reject_remarks','=',False)]}"/>
										<field name="confirm_user_id" attrs="{'invisible':[('state','in',['draft'])]}"/>
										<field name="design_user_id" attrs="{'invisible':[('state','not in',['design_checked','design_verified','moved_to_offer','wo_created','wo_released'])]}"/>
										<field name="design_verifiy_user_id" attrs="{'invisible':[('state','not in',['design_verified','moved_to_offer','wo_created','wo_released'])]}"/>
										<field name="mkt_user_id" attrs="{'invisible':[('state','not in',['moved_to_offer','wo_created','wo_released'])]}"/>
										<field name="wo_user_id" attrs="{'invisible':[('state','not in',['wo_created'])]}"/>
										<field name="cancel_user_id" attrs="{'invisible':[('state','not in',['cancel'])]}"/>
										<field name="update_user_id"/>
									</group>
									<group>
										<field name="crt_date"/>
										<field name="reject_date" attrs="{'invisible':[('reject_remarks','=',False)]}"/>
										<field name="confirm_date" attrs="{'invisible':[('state','in',['draft'])]}"/>
										<field name="design_date" attrs="{'invisible':[('state','not in',['design_checked','design_verified','moved_to_offer','wo_created','wo_released'])]}"/>
										<field name="design_verifiy_date" attrs="{'invisible':[('state','not in',['design_verified','moved_to_offer','wo_created','wo_released'])]}"/>
										<field name="mkt_date" attrs="{'invisible':[('state','not in',['moved_to_offer','wo_created','wo_released'])]}"/>
										<field name="wo_date" attrs="{'invisible':[('state','not in',['wo_created'])]}"/>
										<field name="cancel_date" attrs="{'invisible':[('state','not in',['cancel'])]}"/>
										<field name="update_date"/>
									</group>
								</group>
							</page>
						</notebook>
				</form>
			</field>
		</record>
		
		<record id="t_form_v_pump_offer" model="ir.ui.view">
			<field name="name">Pump Offer Entry Form</field>
			<field name="model">ch.pump.offer</field>
			<field eval="8" name="priority"/>
			<field name="arch" type="xml">
				<form string="Pump Offer Details" version="7.0" create="false" delete="false">
					<group string="Pump Offer Details">
						<group>
							<field name="pumpseries_id" required="1" readonly="1"/>
							<field name="pump_id" required="1" readonly="1"/>
							<field name="hsn_no" on_change="onchange_gst(hsn_no)"/>
							<field name="gst" attrs="{'readonly':[('hsn_no','!=',False)]}"/>
							<field name="customer_id" invisible="1"/>
							<field name="purpose_categ" readonly="1"/>
							<field name="moc_const_id" readonly="1"/>
							<field name="drawing_approval"/>
						</group>
						<group>
							<field name="inspection"/>
							<field name="qty" readonly="1"/>
							<field name="prime_cost" readonly="1"/>
							<field name="order_summary"/>
						</group>
					</group>
					<group string="Forward">
						<group>
							<label for="sam_ratio" string="Sam Ratio" class="append_percentage"/>
							<div>
								<div class="address_format">
									<field name="sam_ratio" style="width: 40%%" on_change="onchange_sam_ratio(prime_cost,works_value,works_value_flag,sam_ratio,sam_ratio_flag)" attrs="{'readonly':[('sam_ratio_flag','!=',True)]}"/>
									<field name="sam_ratio_flag" style="width: 35%%" attrs="{'readonly':[('works_value_flag','=',True)]}"/>
								</div>
							</div>
							<label for="works_value" string="Works Value"/>
							<div>
								<div class="address_format">
									<field name="works_value" style="width: 40%%" on_change="onchange_sam_ratio(prime_cost,works_value,works_value_flag,sam_ratio,sam_ratio_flag)" attrs="{'readonly':[('works_value_flag','!=',True)]}"/>
									<field name="works_value_flag" style="width: 35%%" attrs="{'readonly':[('sam_ratio_flag','=',True)]}"/>
								</div>
							</div>
							<field name="dealer_discount" on_change="onchange_delaer_discount(dealer_discount)"/>
							<field name="customer_discount"/>
							<field name="special_discount" on_change="onchange_special_discount(special_discount)"/>
							<field name="agent_com" invisible="1"/>
						</group>
						<group>
							<label for="p_f" string="P&amp;F" class="append_percentage"/>
							<div>
								<div class="address_format">
									<field name="p_f" style="width: 40%%" on_change="onchange_p_f(p_f,p_f_in_ex)"/>
									<field name="p_f_in_ex" style="width: 35%%" on_change="onchange_p_f(p_f,p_f_in_ex)" attrs="{'required': [('p_f','>',0)]}"/>
								</div>
							</div>
							<label for="freight" string="Freight" class="append_percentage"/>
							<div>
								<div class="address_format">
									<field name="freight" style="width: 40%%" on_change="onchange_freight(freight,freight_in_ex)"/>
									<field name="freight_in_ex" style="width: 35%%" on_change="onchange_freight(freight,freight_in_ex)" attrs="{'required': [('freight','>',0)]}"/>
								</div>
							</div>
							<label for="insurance" string="Insurance" class="append_percentage"/>
							<div>
								<div class="address_format">
									<field name="insurance" style="width: 40%%" on_change="onchange_insurance(insurance,insurance_in_ex)"/>
									<field name="insurance_in_ex" style="width: 35%%" on_change="onchange_insurance(insurance,insurance_in_ex)" attrs="{'required': [('insurance','>',0)]}"/>
								</div>
							</div>
							<field name="supervision_amount" on_change="onchange_supervision(supervision_amount)" invisible="1"/>
							<field name="additional_cost" on_change="onchange_additional_cost(additional_cost)" invisible="1"/>
							<field name="additional_cost_remark" widget="char" invisible="1"/>
						</group>
					</group>
					<group string="Reverse">
						<group>
							<label for="r_cpo_amount" string="CPO Value"/>
							<div>
								<div class="address_format">
									<field name="r_cpo_amount" style="width: 40%%"/>
									<field name="cpo_quote_cust" style="width: 45%%" attrs="{'required':[('r_cpo_amount','>',0)]}"/>
								</div>
							</div>
							<field name="r_sam_ratio" readonly="1"/>
							<field name="r_works_value" readonly="1"/>
							<field name="r_dealer_discount"/>
							<label for="r_customer_discount" string="Customer Discount" class="append_percentage"/>
							<div>
								<div class="address_format">
									<field name="r_customer_discount" on_change="onchange_cust_in_ex(r_customer_discount)" style="width: 40%%"/>
									<field name="cust_in_ex" style="width: 35%%" attrs="{'required':[('r_customer_discount','>',0)]}" invisible="1"/>
								</div>
							</div>
							<field name="r_agent_com" invisible="1"/>
						</group>
						<group>
							<field name="r_special_discount"/>
							<label for="r_p_f" string="P&amp;F" class="append_percentage"/>
							<div>
								<div class="address_format">
									<field name="r_p_f" style="width: 40%%"/>
									<field name="r_p_f_in_ex" style="width: 35%%" attrs="{'required': [('r_p_f','>',0)]}"/>
								</div>
							</div>
							<label for="r_freight" string="Freight" class="append_percentage"/>
							<div>
								<div class="address_format">
									<field name="r_freight" style="width: 40%%"/>
									<field name="r_freight_in_ex" style="width: 35%%" attrs="{'required': [('r_freight','>',0)]}"/>
								</div>
							</div>
							<label for="r_insurance" string="Insurance" class="append_percentage"/>
							<div>
								<div class="address_format">
									<field name="r_insurance" style="width: 40%%"/>
									<field name="r_insurance_in_ex" style="width: 35%%" attrs="{'required': [('r_insurance','>',0)]}"/>
								</div>
							</div>
							<field name="r_supervision_amount" invisible="1"/>
							<field name="r_additional_cost" invisible="1"/>
						</group>
						<button name="entry_update" type="object" string="Compute" class="oe_highlight"/>
					</group>

					<notebook attrs="{'invisible':[('purpose_categ','!=','pump')]}">
						<page string="Foundry Items">
							<group colspan="6" col="6">		
								<field name="off_fou_id" colspan="4" nolabel="1" mode="tree">
									<tree string="Foundry Items"  delete="false" create="false" editable="bottom">
										<field name="is_applicable" readonly="1"/>
										<field name="position_id" attrs="{'readonly':[('load_bom','=',True)]}"/>
										<field name="pattern_id" attrs="{'readonly':[('load_bom','=',True)]}"/>
										<field name="pattern_name" required="1" attrs="{'readonly':[('load_bom','=',True)]}"/>
										<field name="off_name" readonly="1"/>
										<field name="moc_id" required="1" readonly="1"/>
										<field name="moc_changed_flag" readonly="1" invisible="1"/>
										<field name="csd_no" attrs="{'readonly':[('load_bom','=',True)]}"/>
										<field name="qty" required="1" attrs="{'readonly':[('load_bom','=',True)]}"/>
										<field name="prime_cost" readonly="1"/>
										<field name="remarks" attrs="{'readonly':[('load_bom','=',True)]}"/>
										<field name="load_bom" invisible="1"/>
									</tree>	
								</field>
							</group>
						</page>
						<page string="MS Items">
							<group colspan="6" col="6">		
								<field name="off_ms_id" colspan="4" nolabel="1" mode="tree">
									<tree string="MS Items"  delete="false" create="false" editable="bottom">
										<field name="is_applicable" readonly="1"/>
										<field name="position_id" attrs="{'readonly':[('load_bom','=',True)]}"/>
										<field name="ms_id" required="1" attrs="{'readonly':[('load_bom','=',True)]}"/>
										<field name="name" attrs="{'readonly':[('load_bom','=',True)]}"/>
										<field name="off_name" readonly="1"/>
										<field name="moc_id" readonly="1" required="1"/>
										<field name="length" readonly="1"/>
										<field name="moc_changed_flag" readonly="1" invisible="1"/>
										<field name="csd_no" attrs="{'readonly':[('load_bom','=',True)]}"/>
										<field name="qty" required="1" attrs="{'readonly':[('load_bom','=',True)]}"/>
										<field name="prime_cost" readonly="1"/>
										<field name="remarks" attrs="{'readonly':[('load_bom','=',True)]}"/>
										<field name="load_bom" invisible="1"/>
									</tree>	
								</field>
							</group>
						</page>
						<page string="BOT Items">
							<group colspan="6" col="6">		
								<field name="off_bot_id" colspan="4" nolabel="1" mode="tree">
									<tree string="BOT Items"  delete="false" create="false" editable="bottom">
										<field name="is_applicable" readonly="1"/>
										<field name="position_id" attrs="{'readonly':[('load_bom','=',True)]}"/>
										<field name="ms_id" required="1" attrs="{'readonly':[('load_bom','=',True)]}"/>
										<field name="item_name" attrs="{'readonly':[('load_bom','=',True)]}"/>
										<field name="off_name" readonly="1"/>
										<field name="moc_id" readonly="1" required="1"/>
										<field name="moc_changed_flag" readonly="1" invisible="1"/>
										<field name="brand_id" readonly="1"/>
										<field name="qty" required="1" attrs="{'readonly':[('load_bom','=',True)]}"/>
										<field name="prime_cost" readonly="1"/>
										<field name="remarks" attrs="{'readonly':[('load_bom','=',True)]}"/>
										<field name="load_bom" invisible="1"/>
									</tree>	
								</field>
							</group>
						</page>
						<page string="Special Remarks">
							<group colspan="6" col="6">		
								<field name="spl_remark" colspan="4" nolabel="1"/>
							</group>
						</page>
					</notebook>
					<notebook >
						<page string="In Development Details" attrs="{'invisible':[('purpose_categ','!=','in_development')]}">
							<group colspan="6" col="6">
								<field name="line_development_ids" colspan="4" nolabel="1" mode="tree">
									<tree string="Development Items"  delete="false" create="false" editable="bottom">
										<field name="is_applicable"/>
										<field name="position_no" readonly="1"/>
										<field name="pattern_no" readonly="1"/>
										<field name="pattern_name" readonly="1"/>
										<field name="material_code" readonly="1"/>
										<field name="moc_id" readonly="1"/>
										<field name="csd_no" readonly="1"/>
										<field name="qty" readonly="1"/>
										<field name="prime_cost" readonly="1"/>
									</tree>	
								</field>
							</group>
						</page>
					</notebook>
					<group>
						<group class="oe_subtotal_footer oe_left">
							<field name="sam_ratio_tot"/>
							<field name="dealer_discount_tot"/>
							<field name="spl_discount_tot"/>
							<field name="p_f_tot"/>
							<field name="insurance_tot"/>
							<field name="freight_tot"/>
							<field name="pump_price_tot"/>
							<field name="customer_discount_tot"/>
							<field name="tax_tot" invisible="1"/>
							<field name="supervision_tot" invisible="1"/>
							<div class="oe_subtotal_footer_separator oe_inline">
							<label for="net_amount"/>
							</div>
							<field name="net_amount" nolabel="1" class="oe_subtotal_footer_separator" widget="monetary" options="{'currency_field': 'currency_id'}"/>
						</group>
						<group class="oe_subtotal_footer oe_right">
							<field name="r_sam_ratio_tot"/>
							<field name="r_dealer_discount_tot"/>
							<field name="r_spl_discount_tot"/>
							<field name="r_p_f_tot"/>
							<field name="r_p_f_ex_tot" invisible="1"/>
							<field name="r_insurance_tot"/>
							<field name="r_freight_tot"/>
							<div class="oe_subtotal_footer_separator oe_inline">
							<label for="r_cpo_amount_tot"/>
							</div>
							<field name="r_cpo_amount_tot" nolabel="1" class="oe_subtotal_footer_separator"/>
							<field name="r_customer_discount_tot"/>
							<div class="oe_subtotal_footer_separator oe_inline">
							<label for="r_net_amt_tot"/>
							</div>
							<field name="r_net_amt_tot" nolabel="1" class="oe_subtotal_footer_separator"/>
							<field name="r_p_f_ex_tot"/>
							<field name="r_tax_tot"/>
							<field name="r_pump_price_tot" invisible="1"/>
							<div class="oe_subtotal_footer_separator oe_inline">
							<label for="r_net_amount"/>
							</div>
							<field name="r_net_amount" nolabel="1" class="oe_subtotal_footer_separator" widget="monetary" options="{'currency_field': 'currency_id'}"/>
						</group>
					</group>
					
				</form>
			</field>
		</record>
		
		<record id="t_form_v_spare_offer" model="ir.ui.view">
			<field name="name">Spare Offer Entry Form</field>
			<field name="model">ch.spare.offer</field>
			<field eval="8" name="priority"/>
			<field name="arch" type="xml">
				<form string="Spare Offer Details" version="7.0" create="false" delete="false">
					<group string="Spare Offer Details">
						<group>
							<field name="pumpseries_id" required="1" readonly="1"/>
							<field name="pump_id" required="1" readonly="1"/>
							<field name="item_code" required="1" readonly="1"/>
							<field name="item_name" required="1" readonly="1"/>
							<field name="hsn_no" attrs="{'readonly':[('hsn_no','!=',False)]}"/>
							<field name="gst" attrs="{'readonly':[('gst','!=',False)]}"/>
							<field name="customer_id" invisible="1"/>
							<field name="pattern_id" readonly="1" invisible="1"/>
							<field name="ms_id" readonly="1" invisible="1"/>
							<field name="bot_id" readonly="1" invisible="1"/>
						</group>
						<group>
							<field name="qty" readonly="1"/>
							<field name="off_name" readonly="1"/>
							<field name="moc_id" required="1" readonly="1"/>
							<field name="moc_changed_flag" readonly="1" invisible="1"/>
							<field name="prime_cost" readonly="1"/>
						</group>					
					</group>
					
					<group string="Forward">
						<group>
							<label for="sam_ratio" string="Sam Ratio" class="append_percentage"/>
							<div>
								<div class="address_format">
									<field name="sam_ratio" style="width: 40%%" on_change="onchange_sam_ratio(prime_cost,works_value,works_value_flag,sam_ratio,sam_ratio_flag)" attrs="{'readonly':[('sam_ratio_flag','!=',True)]}"/>
									<field name="sam_ratio_flag" style="width: 35%%" attrs="{'readonly':[('works_value_flag','=',True)]}"/>
								</div>
							</div>
							<label for="works_value" string="Works Value"/>
							<div>
								<div class="address_format">
									<field name="works_value" style="width: 40%%" on_change="onchange_sam_ratio(prime_cost,works_value,works_value_flag,sam_ratio,sam_ratio_flag)" attrs="{'readonly':[('works_value_flag','!=',True)]}"/>
									<field name="works_value_flag" style="width: 35%%" attrs="{'readonly':[('sam_ratio_flag','=',True)]}"/>
								</div>
							</div>
							<field name="dealer_discount" on_change="onchange_delaer_discount(dealer_discount)"/>
							<field name="customer_discount"/>
							<field name="special_discount" on_change="onchange_special_discount(special_discount)"/>
							<field name="agent_com" invisible="1"/>
						</group>
						<group>
							<label for="p_f" string="P&amp;F" class="append_percentage"/>
							<div>
								<div class="address_format">
									<field name="p_f" style="width: 40%%" on_change="onchange_p_f(p_f,p_f_in_ex)"/>
									<field name="p_f_in_ex" style="width: 35%%" on_change="onchange_p_f(p_f,p_f_in_ex)" attrs="{'required': [('p_f','>',0)]}"/>
								</div>
							</div>
							<label for="freight" string="Freight" class="append_percentage"/>
							<div>
								<div class="address_format">
									<field name="freight" style="width: 40%%" on_change="onchange_freight(freight,freight_in_ex)"/>
									<field name="freight_in_ex" style="width: 35%%" on_change="onchange_freight(freight,freight_in_ex)" attrs="{'required': [('freight','>',0)]}"/>
								</div>
							</div>
							<label for="insurance" string="Insurance" class="append_percentage"/>
							<div>
								<div class="address_format">
									<field name="insurance" style="width: 40%%" on_change="onchange_insurance(insurance,insurance_in_ex)"/>
									<field name="insurance_in_ex" style="width: 35%%" on_change="onchange_insurance(insurance,insurance_in_ex)" attrs="{'required': [('insurance','>',0)]}"/>
								</div>
							</div>
							<field name="supervision_amount" on_change="onchange_supervision(supervision_amount)" invisible="1"/>
							<field name="additional_cost" on_change="onchange_additional_cost(additional_cost)" invisible="1"/>
							<field name="additional_cost_remark" widget="char" invisible="1"/>
						</group>
					</group>
					<group string="Reverse">
						<group>
							<label for="r_cpo_amount" string="CPO Value"/>
							<div>
								<div class="address_format">
									<field name="r_cpo_amount" style="width: 40%%"/>
									<field name="cpo_quote_cust" style="width: 45%%" attrs="{'required':[('r_cpo_amount','>',0)]}"/>
								</div>
							</div>
							<field name="r_sam_ratio" readonly="1"/>
							<field name="r_works_value" readonly="1"/>
							<field name="r_dealer_discount"/>
							<label for="r_customer_discount" string="Customer Discount" class="append_percentage"/>
							<div>
								<div class="address_format">
									<field name="r_customer_discount" on_change="onchange_cust_in_ex(r_customer_discount)" style="width: 40%%"/>
									<field name="cust_in_ex" style="width: 35%%" attrs="{'required':[('r_customer_discount','>',0)]}" invisible="1"/>
								</div>
							</div>
							<field name="r_agent_com" invisible="1"/>
						</group>
						<group>
							<field name="r_special_discount"/>
							<label for="r_p_f" string="P&amp;F" class="append_percentage"/>
							<div>
								<div class="address_format">
									<field name="r_p_f" style="width: 40%%"/>
									<field name="r_p_f_in_ex" style="width: 35%%" attrs="{'required': [('r_p_f','>',0)]}"/>
								</div>
							</div>
							<label for="r_freight" string="Freight" class="append_percentage"/>
							<div>
								<div class="address_format">
									<field name="r_freight" style="width: 40%%"/>
									<field name="r_freight_in_ex" style="width: 35%%" attrs="{'required': [('r_freight','>',0)]}"/>
								</div>
							</div>
							<label for="r_insurance" string="Insurance" class="append_percentage"/>
							<div>
								<div class="address_format">
									<field name="r_insurance" style="width: 40%%"/>
									<field name="r_insurance_in_ex" style="width: 35%%" attrs="{'required': [('r_insurance','>',0)]}"/>
								</div>
							</div>
							<field name="r_supervision_amount" invisible="1"/>
							<field name="r_additional_cost" invisible="1"/>
						</group>
						<button name="entry_update" type="object" string="Compute" class="oe_highlight"/>
					</group>
						<group>
							<group class="oe_subtotal_footer oe_left">
								<field name="sam_ratio_tot"/>
								<field name="dealer_discount_tot"/>
								<field name="spl_discount_tot"/>
								<field name="p_f_tot"/>
								<field name="insurance_tot"/>
								<field name="freight_tot"/>
								<field name="pump_price_tot"/>
								<field name="customer_discount_tot"/>
								<field name="tax_tot" invisible="1"/>
								<div class="oe_subtotal_footer_separator oe_inline">
								<label for="net_amount"/>
								</div>
								<field name="net_amount" nolabel="1" class="oe_subtotal_footer_separator" widget="monetary" options="{'currency_field': 'currency_id'}"/>
							</group>
							<group class="oe_subtotal_footer oe_right">
								<field name="r_sam_ratio_tot"/>
								<field name="r_dealer_discount_tot"/>
								<field name="r_spl_discount_tot"/>
								<field name="r_p_f_tot"/>
								<field name="r_p_f_ex_tot" invisible="1"/>
								<field name="r_insurance_tot"/>
								<field name="r_freight_tot"/>
								<div class="oe_subtotal_footer_separator oe_inline">
								<label for="r_cpo_amount_tot"/>
								</div>
								<field name="r_cpo_amount_tot" nolabel="1" class="oe_subtotal_footer_separator"/>
								<field name="r_customer_discount_tot"/>
								<div class="oe_subtotal_footer_separator oe_inline">
								<label for="r_net_amt_tot"/>
								</div>
								<field name="r_net_amt_tot" nolabel="1" class="oe_subtotal_footer_separator"/>
								<field name="r_p_f_ex_tot"/>
								<field name="r_tax_tot"/>
								<field name="r_pump_price_tot" invisible="1"/>
								<div class="oe_subtotal_footer_separator oe_inline">
								<label for="r_net_amount"/>
								</div>
								<field name="r_net_amount" nolabel="1" class="oe_subtotal_footer_separator" widget="monetary" options="{'currency_field': 'currency_id'}"/>
							</group>
						</group>
				</form>
			</field>
		</record>
		
		
		<record id="t_form_v_component_offer" model="ir.ui.view">
			<field name="name">Component Offer Entry Form</field>
			<field name="model">ch.crm.component.offer</field>
			<field eval="8" name="priority"/>
			<field name="arch" type="xml">
				<form string="Component Offer Details" version="7.0" create="false" delete="false">
					<group string="Component Offer Details">
						<group>
							<field name="item_code" required="1" readonly="1"/>
							<field name="item_name" required="1" readonly="1"/>
							<field name="hsn_no" attrs="{'readonly':[('hsn_no','!=',False)]}"/>
							<field name="gst" attrs="{'readonly':[('gst','!=',False)]}"/>
							<field name="customer_id" invisible="1"/>
							<field name="off_name" readonly="1"/>
							<field name="moc_id" required="1" readonly="1"/>
							<field name="moc_changed_flag" readonly="1" invisible="1"/>
							<field name="qty" readonly="1"/>
							<field name="prime_cost" readonly="1"/>
							<field name="additional_cost" invisible="1"/>
							<field name="additional_cost_remark" widget="char" invisible="1"/>
							<label for="sam_ratio" string="Sam Ratio" class="append_percentage"/>
							<div>
								<div class="address_format">
									<field name="sam_ratio" style="width: 40%%" on_change="onchange_sam_ratio(prime_cost,works_value,works_value_flag,sam_ratio,sam_ratio_flag)" attrs="{'readonly':[('sam_ratio_flag','!=',True)]}"/>
									<field name="sam_ratio_flag" style="width: 35%%" attrs="{'readonly':[('works_value_flag','=',True)]}"/>
								</div>
							</div>
							<label for="works_value" string="Works Value"/>
							<div>
								<div class="address_format">
									<field name="works_value" style="width: 40%%" on_change="onchange_sam_ratio(prime_cost,works_value,works_value_flag,sam_ratio,sam_ratio_flag)" attrs="{'readonly':[('works_value_flag','!=',True)]}"/>
									<field name="works_value_flag" style="width: 35%%" attrs="{'readonly':[('sam_ratio_flag','=',True)]}"/>
								</div>
							</div>
							<field name="pattern_id" readonly="1" invisible="1"/>
							<field name="ms_id" readonly="1" invisible="1"/>
							<field name="bot_id" readonly="1" invisible="1"/>
						</group>
						<group>
							<field name="dealer_discount"/>
							<field name="customer_discount"/>
							<field name="agent_com"/>
							<field name="special_discount"/>
							<label for="p_f" string="P&amp;F" class="append_percentage"/>
							<div>
								<div class="address_format">
									<field name="p_f" style="width: 40%%"/>
									<field name="p_f_in_ex" style="width: 35%%" attrs="{'required': [('p_f','>',0)]}"/>
								</div>
							</div>
							<label for="freight" string="Freight" class="append_percentage"/>
							<div>
								<div class="address_format">
									<field name="freight" style="width: 40%%"/>
									<field name="freight_in_ex" style="width: 35%%" attrs="{'required': [('freight','>',0)]}"/>
								</div>
							</div>
							<label for="insurance" string="Insurance" class="append_percentage"/>
							<div>
								<div class="address_format">
									<field name="insurance" style="width: 40%%"/>
									<field name="insurance_in_ex" style="width: 35%%" attrs="{'required': [('insurance','>',0)]}"/>
								</div>
							</div>
							<field name="supervision_amount"/>
						</group>					
					</group>
						<group>
							<group>
							</group>
							<group class="oe_subtotal_footer oe_right">
								<field name="sam_ratio_tot"/>
								<field name="dealer_discount_tot"/>
								<field name="customer_discount_tot"/>
								<field name="spl_discount_tot"/>
								<field name="tax_tot"/>
								<field name="p_f_tot"/>
								<field name="freight_tot"/>
								<field name="insurance_tot"/>
								<field name="pump_price_tot"/>
								<div class="oe_subtotal_footer_separator oe_inline">
								<label for="net_amount"/>
								</div>
								<field name="net_amount" nolabel="1" class="oe_subtotal_footer_separator" widget="monetary" options="{'currency_field': 'currency_id'}"/>
							</group>
						</group>
				</form>
			</field>
		</record>
		
		<record id="t_form_v_accessories_offer" model="ir.ui.view">
			<field name="name">Accessories Offer Entry Form</field>
			<field name="model">ch.accessories.offer</field>
			<field eval="8" name="priority"/>
			<field name="arch" type="xml">
				<form string="Accessories Offer Details" version="7.0" create="false" delete="false">
					<group string="Accessories Offer Details">
						<group>
							<field name="access_id" required="1" readonly="1"/>
							<field name="hsn_no" attrs="{'readonly':[('hsn_no','!=',False)]}"/>
							<field name="gst" attrs="{'readonly':[('gst','!=',False)]}"/>
							<field name="customer_id" invisible="1"/>
							<field name="off_name" readonly="1"/>
						</group>
						<group>
							<field name="pump_id" readonly="1"/>
							<field name="moc_id" required="0" readonly="1" invisible="1"/>
							<field name="moc_changed_flag" readonly="1" invisible="1"/>
							<field name="qty" readonly="1"/>
							<field name="prime_cost" readonly="1"/>
						</group>
					</group>
					
					<group string="Forward">
						<group>
							<label for="sam_ratio" string="Sam Ratio" class="append_percentage"/>
							<div>
								<div class="address_format">
									<field name="sam_ratio" style="width: 40%%" on_change="onchange_sam_ratio(prime_cost,works_value,works_value_flag,sam_ratio,sam_ratio_flag)" attrs="{'readonly':[('sam_ratio_flag','!=',True)]}"/>
									<field name="sam_ratio_flag" style="width: 35%%" attrs="{'readonly':[('works_value_flag','=',True)]}"/>
								</div>
							</div>
							<label for="works_value" string="Works Value"/>
							<div>
								<div class="address_format">
									<field name="works_value" style="width: 40%%" on_change="onchange_sam_ratio(prime_cost,works_value,works_value_flag,sam_ratio,sam_ratio_flag)" attrs="{'readonly':[('works_value_flag','!=',True)]}"/>
									<field name="works_value_flag" style="width: 35%%" attrs="{'readonly':[('sam_ratio_flag','=',True)]}"/>
								</div>
							</div>
							<field name="dealer_discount" on_change="onchange_delaer_discount(dealer_discount)"/>
							<field name="customer_discount"/>
							<field name="special_discount" on_change="onchange_special_discount(special_discount)"/>
							<field name="agent_com" invisible="1"/>
						</group>
						<group>
							<label for="p_f" string="P&amp;F" class="append_percentage"/>
							<div>
								<div class="address_format">
									<field name="p_f" style="width: 40%%" on_change="onchange_p_f(p_f,p_f_in_ex)"/>
									<field name="p_f_in_ex" style="width: 35%%" on_change="onchange_p_f(p_f,p_f_in_ex)" attrs="{'required': [('p_f','>',0)]}"/>
								</div>
							</div>
							<label for="freight" string="Freight" class="append_percentage"/>
							<div>
								<div class="address_format">
									<field name="freight" style="width: 40%%" on_change="onchange_freight(freight,freight_in_ex)"/>
									<field name="freight_in_ex" style="width: 35%%" on_change="onchange_freight(freight,freight_in_ex)" attrs="{'required': [('freight','>',0)]}"/>
								</div>
							</div>
							<label for="insurance" string="Insurance" class="append_percentage"/>
							<div>
								<div class="address_format">
									<field name="insurance" style="width: 40%%" on_change="onchange_insurance(insurance,insurance_in_ex)"/>
									<field name="insurance_in_ex" style="width: 35%%" on_change="onchange_insurance(insurance,insurance_in_ex)" attrs="{'required': [('insurance','>',0)]}"/>
								</div>
							</div>
							<field name="supervision_amount" on_change="onchange_supervision(supervision_amount)" invisible="1"/>
							<field name="additional_cost" on_change="onchange_additional_cost(additional_cost)" invisible="1"/>
							<field name="additional_cost_remark" widget="char" invisible="1"/>
						</group>
					</group>
					<group string="Reverse">
						<group>
							<label for="r_cpo_amount" string="CPO Value"/>
							<div>
								<div class="address_format">
									<field name="r_cpo_amount" style="width: 40%%"/>
									<field name="cpo_quote_cust" style="width: 45%%" attrs="{'required':[('r_cpo_amount','>',0)]}"/>
								</div>
							</div>
							<field name="r_sam_ratio" readonly="1"/>
							<field name="r_works_value" readonly="1"/>
							<field name="r_dealer_discount"/>
							<label for="r_customer_discount" string="Customer Discount" class="append_percentage"/>
							<div>
								<div class="address_format">
									<field name="r_customer_discount" on_change="onchange_cust_in_ex(r_customer_discount)" style="width: 40%%"/>
									<field name="cust_in_ex" style="width: 35%%" attrs="{'required':[('r_customer_discount','>',0)]}" invisible="1"/>
								</div>
							</div>
							<field name="r_agent_com" invisible="1"/>
						</group>
						<group>
							<field name="r_special_discount"/>
							<label for="r_p_f" string="P&amp;F" class="append_percentage"/>
							<div>
								<div class="address_format">
									<field name="r_p_f" style="width: 40%%"/>
									<field name="r_p_f_in_ex" style="width: 35%%" attrs="{'required': [('r_p_f','>',0)]}"/>
								</div>
							</div>
							<label for="r_freight" string="Freight" class="append_percentage"/>
							<div>
								<div class="address_format">
									<field name="r_freight" style="width: 40%%"/>
									<field name="r_freight_in_ex" style="width: 35%%" attrs="{'required': [('r_freight','>',0)]}"/>
								</div>
							</div>
							<label for="r_insurance" string="Insurance" class="append_percentage"/>
							<div>
								<div class="address_format">
									<field name="r_insurance" style="width: 40%%"/>
									<field name="r_insurance_in_ex" style="width: 35%%" attrs="{'required': [('r_insurance','>',0)]}"/>
								</div>
							</div>
							<field name="r_supervision_amount" invisible="1"/>
							<field name="r_additional_cost" invisible="1"/>
						</group>
						<button name="entry_update" type="object" string="Compute" class="oe_highlight"/>
					</group>
					
					<notebook>
						<page string="Foundry Items">
							<group colspan="6" col="6">		
								<field name="off_fou_id" colspan="4" nolabel="1" mode="tree">
									<tree string="Foundry Items"  delete="false" create="false" editable="bottom">
										<field name="is_applicable" readonly="1"/>
										<field name="position_id" readonly="1"/>
										<field name="pattern_id" readonly="1"/>
										<field name="pattern_name" readonly="1"/>
										<field name="moc_id" readonly="1"/>
										<field name="csd_no" readonly="1"/>
										<field name="qty" readonly="1"/>
										<field name="prime_cost" readonly="1"/>
										<field name="remarks" readonly="1"/>
										<field name="load_bom" invisible="1"/>
									</tree>	
								</field>
							</group>
						</page>

						<page string="MS Items">
							<group colspan="6" col="6">		
								<field name="off_ms_id" colspan="4" nolabel="1" mode="tree">
									<tree string="MS Items"  delete="false" create="false" editable="bottom">
										<field name="is_applicable" readonly="1"/>
										<field name="position_id" readonly="1"/>
										<field name="ms_id" required="1" readonly="1"/>
										<field name="name" readonly="1"/>
										<field name="moc_id" readonly="1" required="1"/>
										<field name="csd_no" readonly="1"/>
										<field name="qty" required="1" readonly="1"/>
										<field name="prime_cost" readonly="1"/>
										<field name="remarks" readonly="1"/>
										<field name="load_bom" invisible="1"/>
									</tree>	
								</field>
							</group>
						</page>
						<page string="BOT Items">
							<group colspan="6" col="6">		
								<field name="off_bot_id" colspan="4" nolabel="1" mode="tree">
									<tree string="BOT Items"  delete="false" create="false" editable="bottom">
										<field name="is_applicable" readonly="1"/>
										<field name="ms_id" readonly="1"/>
										<field name="name" readonly="1"/>
										<field name="moc_id" readonly="1"/>
										<field name="csd_no" readonly="1"/>
										<field name="qty" required="1" readonly="1"/>
										<field name="prime_cost" readonly="1"/>
										<field name="remarks" readonly="1"/>
										<field name="load_bom" invisible="1"/>
									</tree>	
								</field>
							</group>
						</page>
					</notebook>		
						<group>
							<group class="oe_subtotal_footer oe_left">
							<field name="sam_ratio_tot"/>
							<field name="dealer_discount_tot"/>
							<field name="spl_discount_tot"/>
							<field name="p_f_tot"/>
							<field name="insurance_tot"/>
							<field name="freight_tot"/>
							<field name="pump_price_tot"/>
							<field name="customer_discount_tot"/>
							<field name="tax_tot" invisible="1"/>
							<div class="oe_subtotal_footer_separator oe_inline">
							<label for="net_amount"/>
							</div>
							<field name="net_amount" nolabel="1" class="oe_subtotal_footer_separator" widget="monetary" options="{'currency_field': 'currency_id'}"/>
						</group>
						<group class="oe_subtotal_footer oe_right">
							<field name="r_sam_ratio_tot"/>
							<field name="r_dealer_discount_tot"/>
							<field name="r_spl_discount_tot"/>
							<field name="r_p_f_tot"/>
							<field name="r_p_f_ex_tot" invisible="1"/>
							<field name="r_insurance_tot"/>
							<field name="r_freight_tot"/>
							<div class="oe_subtotal_footer_separator oe_inline">
							<label for="r_cpo_amount_tot"/>
							</div>
							<field name="r_cpo_amount_tot" nolabel="1" class="oe_subtotal_footer_separator"/>
							<field name="r_customer_discount_tot"/>
							<div class="oe_subtotal_footer_separator oe_inline">
							<label for="r_net_amt_tot"/>
							</div>
							<field name="r_net_amt_tot" nolabel="1" class="oe_subtotal_footer_separator"/>
							<field name="r_p_f_ex_tot"/>
							<field name="r_tax_tot"/>
							<field name="r_pump_price_tot" invisible="1"/>
							<div class="oe_subtotal_footer_separator oe_inline">
							<label for="r_net_amount"/>
							</div>
							<field name="r_net_amount" nolabel="1" class="oe_subtotal_footer_separator" widget="monetary" options="{'currency_field': 'currency_id'}"/>
						</group>
						</group>
						
						
						
				</form>
			</field>
		</record>
		
		<record id="t_tree_v_crm_offer" model="ir.ui.view">
			<field name="name">CRM Offer Entry Tree</field>
			<field name="model">kg.crm.offer</field>
			<field eval="8" name="priority"/>
			<field name="arch" type="xml">
				<tree colors="blue:state == 'draft';red:state == 'confirmed';black:state == 'moved_to_offer';gray:state == 'call'" 
								toolbar="True" string="Enquiry Entry Tree"  create="false" delete="false">					
					<button name="send_to_dms" type="object" string="DMS" icon="terp-folder-blue"/>
					<field name="name"/>
					<field name="revision"/>
					<field name="enquiry_date"/>
					<field name="enquiry_no"/>
					<field name="customer_id"/>
					<field name="purpose"/>
					<field name="state"/>
					<field name="wo_flag" invisible="1"/>
					<field name="zone" invisible="1"/>
					<field name="division_id" invisible="1"/>
					<field name="segment" invisible="1"/>
				</tree>
			</field>
		</record>
		
		<!-- Search View Start -->

		<record id="t_search_v_crm_offer" model="ir.ui.view">
            <field name="name">Offer Entry Search</field>
            <field name="model">kg.crm.offer</field>
            <field name="arch" type="xml">
                <search string="Offer Entry Search">
					<field name="name" string="Offer No" filter_domain="[('name','ilike',self)]" />
					<field name="enquiry_no" string="Enquiry No" filter_domain="[('enquiry_no','ilike',self)]" />
					<filter icon="terp-check" name="draft" string="Draft" domain="[('state','=','draft')]"/>
					<separator/>
                    <group expand="0" string="Group By...">
						<filter string="Customer" icon="terp-gtk-select-all" domain="[]" context="{'group_by':'customer_id'}"/>
                        <filter string="Status" icon="terp-gtk-select-all" domain="[]" context="{'group_by':'state'}"/>
					</group>
                </search>
			</field>
		</record>
		
		<record id="t_search_v_crm_offer_mgmt" model="ir.ui.view">
            <field name="name">Offer Entry Search</field>
            <field name="model">kg.crm.offer</field>
            <field name="arch" type="xml">
                <search string="Offer Entry Search">
					<field name="name" string="Offer No" filter_domain="[('name','ilike',self)]" />
					<field name="enquiry_no" string="Enquiry No" filter_domain="[('enquiry_no','ilike',self)]" />
					<filter icon="terp-check" name="draft" string="Draft" domain="[('state','=','draft')]"/>
					<separator/>
                    <group expand="0" string="Group By...">
						<filter string="Zone" icon="terp-gtk-select-all" domain="[]" context="{'group_by':'zone'}"/>
						<filter string="Segment" icon="terp-gtk-select-all" domain="[]" context="{'group_by':'segment'}"/>
						<filter string="Division" icon="terp-gtk-select-all" domain="[]" context="{'group_by':'division_id'}"/>
						<filter string="Customer" icon="terp-gtk-select-all" domain="[]" context="{'group_by':'customer_id'}"/>
                        <filter string="Status" icon="terp-gtk-select-all" domain="[]" context="{'group_by':'state'}"/>
					</group>
                </search>
			</field>
		</record>
		
	<!-- Search View End -->
	
	<!-- Menu Action Start-->
		
		<record id="tma_crm_offer" model="ir.actions.act_window">
			<field name="name">Offer</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">kg.crm.offer</field>
			<field name="view_type">form</field>
			<field name="context">{}</field>
			<field name="view_id" ref="t_tree_v_crm_offer"/>
			<field name="search_view_id" ref="t_search_v_crm_offer"/>
			<field name="domain">[('segment','=','dom'),('division_code','=','CPD')]</field>
		</record>
		
		<record id="tma_crm_offer_north" model="ir.actions.act_window">
			<field name="name">North Offer</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">kg.crm.offer</field>
			<field name="view_type">form</field>
			<field name="context">{}</field>
			<field name="view_id" ref="t_tree_v_crm_offer"/>
			<field name="search_view_id" ref="t_search_v_crm_offer"/>
			<field name="domain">[('segment','=','dom'),('zone','=','north')]</field>
		</record>
		
		<record id="tma_crm_offer_south" model="ir.actions.act_window">
			<field name="name">South Offer</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">kg.crm.offer</field>
			<field name="view_type">form</field>
			<field name="context">{}</field>
			<field name="view_id" ref="t_tree_v_crm_offer"/>
			<field name="search_view_id" ref="t_search_v_crm_offer"/>
			<field name="domain">[('segment','=','dom'),('zone','=','south')]</field>
		</record>
		
		<record id="tma_crm_offer_east" model="ir.actions.act_window">
			<field name="name">East Offer</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">kg.crm.offer</field>
			<field name="view_type">form</field>
			<field name="context">{}</field>
			<field name="view_id" ref="t_tree_v_crm_offer"/>
			<field name="search_view_id" ref="t_search_v_crm_offer"/>
			<field name="domain">[('segment','=','dom'),('zone','=','east')]</field>
		</record>
		
		<record id="tma_crm_offer_west" model="ir.actions.act_window">
			<field name="name">West Offer</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">kg.crm.offer</field>
			<field name="view_type">form</field>
			<field name="context">{}</field>
			<field name="view_id" ref="t_tree_v_crm_offer"/>
			<field name="search_view_id" ref="t_search_v_crm_offer"/>
			<field name="domain">[('segment','=','dom'),('zone','=','west')]</field>
		</record>
		
		<record id="tma_crm_offer_mines" model="ir.actions.act_window">
			<field name="name">Mines Offer</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">kg.crm.offer</field>
			<field name="view_type">form</field>
			<field name="context">{}</field>
			<field name="view_id" ref="t_tree_v_crm_offer"/>
			<field name="search_view_id" ref="t_search_v_crm_offer"/>
			<field name="domain">[('segment','=','dom'),('zone','=','mines')]</field>
		</record>
		
		<record id="tma_crm_offer_exp" model="ir.actions.act_window">
			<field name="name">Export Offer</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">kg.crm.offer</field>
			<field name="view_type">form</field>
			<field name="context">{}</field>
			<field name="view_id" ref="t_tree_v_crm_offer"/>
			<field name="search_view_id" ref="t_search_v_crm_offer"/>
			<field name="domain">[('segment','=','exp')]</field>
		</record>
		
		<record id="tma_crm_offer_ipd" model="ir.actions.act_window">
			<field name="name">IPD Offer</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">kg.crm.offer</field>
			<field name="view_type">form</field>
			<field name="context">{}</field>
			<field name="view_id" ref="t_tree_v_crm_offer"/>
			<field name="search_view_id" ref="t_search_v_crm_offer"/>
			<field name="domain">[('segment','=','dom'),('division_code','=','IPD')]</field>
		</record>
		
		<record id="tma_crm_offer_mgmt_md" model="ir.actions.act_window">
			<field name="name">Offer</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">kg.crm.offer</field>
			<field name="view_type">form</field>
			<field name="context">{}</field>
			<field name="view_id" ref="t_tree_v_crm_offer"/>
			<field name="search_view_id" ref="t_search_v_crm_offer_mgmt"/>
			<field name="domain">[('state','!=','revised')]</field>
		</record>
		
	<!-- Menu Action End-->
		
		<record forcecreate="1" id="seq_crm_offer" model="ir.sequence.type">	
			<field name="name">CRM Offer</field>
			<field name="code">kg.crm.offer</field>
		</record>

		<record forcecreate="1" id="crm_offer" model="ir.sequence">
		  <field name="name">CRM Offer</field>
		  <field name="code">kg.crm.offer</field>
		  <field name="padding" eval="3"/>
		  <field name="prefix">CRMO/%(year)s/</field>
		  <field name="reset_sequence">fiscal_reset</field>
		</record>
		
		<!-- Menu items -->
		
		<!-- Offer --> 
		<menuitem action="tma_crm_offer" name="Offer" id="tam_crm_offer" parent="kg_menus.cpm_crm_enquiry_menu" sequence="3"/>
		
		<!-- Offer North --> 
		<menuitem action="tma_crm_offer_north" name="North Offer" id="tam_crm_offer_north" parent="kg_menus.tpm_crm_enquiry_north" sequence="2"/>
		<!-- Offer South --> 
		<menuitem action="tma_crm_offer_south" name="South Offer" id="tam_crm_offer_south" parent="kg_menus.tpm_crm_enquiry_south" sequence="2"/>
		<!-- Offer East --> 
		<menuitem action="tma_crm_offer_east" name="East Offer" id="tam_crm_offer_east" parent="kg_menus.tpm_crm_enquiry_east" sequence="2"/>
		<!-- Offer West --> 
		<menuitem action="tma_crm_offer_west" name="West Offer" id="tam_crm_offer_west" parent="kg_menus.tpm_crm_enquiry_west" sequence="2"/>
		<!-- Offer Mines --> 
		<menuitem action="tma_crm_offer_mines" name="Mines Offer" id="tam_crm_offer_mines" parent="kg_menus.tpm_crm_enquiry_mines" sequence="2"/>
		<!-- Offer Export --> 
		<menuitem action="tma_crm_offer_exp" name="Export Offer" id="tam_crm_offer_exp" parent="kg_menus.tpm_crm_enquiry_export" sequence="2"/>
		<!-- Offer IPD --> 
		<menuitem action="tma_crm_offer_ipd" name="IPD Offer" id="tam_crm_offer_ipd" parent="kg_menus.tpm_crm_enquiry_ipd" sequence="2"/>
		
	
	</data>
</openerp>
